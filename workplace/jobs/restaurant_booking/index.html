<!DOCTYPE html>
<html lang="en">

<head>
    <!-- no cache -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <!-- no cache -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>จองโต๊ะร้านอาหาร</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pattaya&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/nprogress@0.2.0/nprogress.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
        * {
            font-family: 'Pattaya', cursive;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
            min-height: 100vh;
        }

        /* Welcome Landing Page Styles */
        .welcome-page {
            text-align: center;
            padding: 60px 20px;
        }

        .welcome-logo {
            margin-bottom: 40px;
        }

        .welcome-logo img {
            max-width: 350px;
            height: auto;
            filter: drop-shadow(0 10px 25px rgba(0, 0, 0, 0.15));
        }

        .welcome-content h1 {
            font-size: 3.5rem;
            font-weight: bold;
            color: #FF6B6B;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.3);
        }

        .welcome-content p {
            font-size: 1.6rem;
            color: #4ECDC4;
            margin-bottom: 15px;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
        }

        .welcome-subtitle {
            font-size: 1.2rem !important;
            opacity: 0.9;
            margin-bottom: 40px !important;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            color: #2C3E50 !important;
        }

        .start-booking-btn {
            font-size: 1.4rem;
            padding: 18px 45px;
            border-radius: 50px;
            background-color: white;
            color: #FF6B6B;
            border: none;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .start-booking-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            background-color: #f8f9fa;
            color: #FF6B6B;
        }

        .start-booking-btn:focus {
            background-color: #f8f9fa;
            color: #FF6B6B;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        /* Responsive Welcome */
        @media (max-width: 768px) {
            .welcome-page {
                padding: 40px 15px;
            }

            .welcome-content h1 {
                font-size: 2.5rem;
            }

            .welcome-content p {
                font-size: 1.3rem;
            }

            .welcome-logo img {
                max-width: 250px;
            }

            .start-booking-btn {
                font-size: 1.2rem;
                padding: 15px 35px;
            }
        }

        @media (max-width: 480px) {
            .welcome-page {
                padding: 30px 10px;
            }

            .welcome-content h1 {
                font-size: 2rem;
            }

            .welcome-content p {
                font-size: 1.1rem;
            }

            .welcome-logo img {
                max-width: 200px;
            }

            .start-booking-btn {
                font-size: 1.1rem;
                padding: 12px 30px;
            }
        }

        .main-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px 0;
        }

        .booking-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            margin: 20px;
        }

        .logo-container {
            text-align: center;
            margin-bottom: 30px;
            padding: 40px;
        }

        .logo-container img {
            max-width: 120px;
            height: auto;
            margin-bottom: 20px;
        }

        .logo-container h2 {
            color: #FF6B6B;
            font-weight: 700;
            margin: 0;
            font-family: 'Pattaya', cursive;
            font-size: 2.2rem;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
        }

        .step {
            display: flex;
            align-items: center;
            margin: 0 10px;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e9ecef;
            color: #6c757d;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }

        .step.active .step-number {
            background: #FF6B6B;
            color: white;
        }

        .step.completed .step-number {
            background: #4ECDC4;
            color: white;
        }

        .step-line {
            width: 50px;
            height: 2px;
            background: #e9ecef;
            margin: 0 10px;
        }

        .step.completed+.step-line {
            background: #4ECDC4;
        }

        .calendar-container {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 12px;
            margin: 30px 0;
            padding: 25px;
            background: #FFFFFF;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .calendar-header {
            text-align: center;
            font-weight: bold;
            padding: 15px 8px;
            background: #FF6B6B;
            color: white;
            border-radius: 12px;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
            position: relative;
            overflow: hidden;
        }

        .calendar-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0% {
                left: -100%;
            }

            100% {
                left: 100%;
            }
        }

        .calendar-day {
            aspect-ratio: 1;
            border: 2px solid transparent;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            font-weight: 600;
            font-size: 1.1rem;
            overflow: hidden;
            background: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .calendar-day::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .calendar-day:hover::before {
            opacity: 1;
        }

        .calendar-day:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        }

        .calendar-day.available {
            background: #D4EDDA;
            border-color: #4ECDC4;
            color: #155724;
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.35);
            font-weight: 700;
        }

        .calendar-day.available:hover {
            background: #4ECDC4;
            color: white;
            box-shadow: 0 15px 40px rgba(78, 205, 196, 0.4);
        }

        .calendar-day.full {
            background: linear-gradient(135deg, #FFE5E5 0%, #FFC5C5 100%);
            border-color: #FF8A80;
            color: #D32F2F;
            cursor: not-allowed;
            box-shadow: 0 4px 15px rgba(255, 138, 128, 0.3);
            opacity: 0.8;
            font-weight: 500;
        }

        .calendar-day.closed {
            background: linear-gradient(135deg, #F5F5F5 0%, #E0E0E0 100%);
            border-color: #BDBDBD;
            color: #757575;
            cursor: not-allowed;
            box-shadow: 0 4px 15px rgba(189, 189, 189, 0.3);
            opacity: 0.6;
            font-weight: 400;
            position: relative;
        }


        .calendar-day.selected {
            background: #FF6B6B;
            border-color: #FF6B6B;
            color: white;
            transform: scale(1.15);
            box-shadow: 0 20px 50px rgba(255, 107, 107, 0.5);
            z-index: 10;
            position: relative;
        }

        @keyframes checkmark {
            0% {
                opacity: 0;
                transform: scale(0);
            }

            50% {
                opacity: 1;
                transform: scale(1.2);
            }

            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .status-legend {
            display: flex;
            justify-content: center;
            /* gap: 30px; */
            margin: 30px 0;
            font-size: 15px;
            /* padding: 20px; */
            background: #FFFFFF;
            /* border-radius: 15px; */
            /* box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05); */
            /* backdrop-filter: blur(10px); */
            /* border: 1px solid rgba(255, 255, 255, 0.3); */
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            border-radius: 25px;
            /* background: #F8F9FA; */
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: smaller
        }

        .legend-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            background: #FFFFFF;
        }

        .legend-color {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.8);
            /* box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); */
        }

        .legend-item:nth-child(1) .legend-color {
            background: #4ECDC4;
        }

        .legend-item:nth-child(2) .legend-color {
            background: linear-gradient(135deg, #FFE5E5 0%, #FFC5C5 100%);
            border-color: #FF8A80;
        }

        .legend-item:nth-child(3) .legend-color {
            background: linear-gradient(135deg, #F5F5F5 0%, #E0E0E0 100%);
            border-color: #BDBDBD;
        }

        .seat-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .seat-option {
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .seat-option:hover {
            border-color: #FF6B6B;
            transform: translateY(-2px);
        }

        .seat-option.selected {
            border-color: #FF6B6B;
            background: #FFF5F5;
        }

        /* Button Slot Styles */
        .btn-guest-count,
        .btn-location {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            min-width: 120px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            width: 100%;
        }

        @media (max-width: 480px) {
            .btn-guest-count,
            .btn-location {
                min-width: 100%;
                padding: 15px 20px;
                font-size: 0.9rem;
            }
        }

        .btn-guest-count:hover,
        .btn-location:hover {
            border-color: #FF6B6B;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.2);
        }

        .btn-guest-count.selected,
        .btn-location.selected {
            border-color: #FF6B6B;
            background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
        }

        .btn-guest-count i,
        .btn-location i {
            font-size: 1.5rem;
            color: #FF6B6B;
        }

        .btn-guest-count.selected i,
        .btn-location.selected i {
            color: white;
        }

        .btn-guest-count span,
        .btn-location span {
            font-weight: 600;
            font-size: 1rem;
        }

        .availability-text {
            font-size: 0.8rem;
            opacity: 0.8;
            font-weight: 400;
        }

        .btn-location.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #ccc;
        }

        .btn-location.unavailable:hover {
            transform: none;
            border-color: #ccc;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        @media (max-width: 768px) {

            .guest-count-buttons,
            .location-buttons {
                gap: 10px !important;
            }

            .btn-guest-count,
            .btn-location {
                min-width: 100px;
                padding: 15px 20px;
            }
            
            .location-buttons {
                flex-direction: column;
                align-items: center;
                max-width: 300px;
                margin: 0 auto;
            }
        }

        /* Guest Count Buttons Grid Layout */
        .guest-count-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            max-width: 400px;
            margin: 0 auto;
        }

        .guest-count-buttons .btn-guest-count {
            min-width: 160px;
        }

        @media (max-width: 480px) {
            .guest-count-buttons {
                grid-template-columns: 1fr;
                max-width: 300px;
                gap: 12px;
            }
            
            .guest-count-buttons .btn-guest-count {
                min-width: 100%;
            }
        }

        /* Time Slot Buttons Grid Layout */
        .time-slot-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            max-width: 400px;
            margin: 0 auto;
        }

        @media (max-width: 480px) {
            .time-slot-buttons {
                grid-template-columns: 1fr;
                max-width: 300px;
                gap: 12px;
            }
        }

        .btn-time-slot {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            min-width: 160px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            width: 100%;
        }

        @media (max-width: 480px) {
            .btn-time-slot {
                min-width: 100%;
                padding: 15px 20px;
            }
        }

        .btn-time-slot:hover {
            border-color: #FF6B6B;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.2);
        }

        .btn-time-slot.selected {
            border-color: #FF6B6B;
            background: linear-gradient(135deg, #FF6B6B 0%, #4ECDC4 100%);
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
        }

        .btn-time-slot span {
            font-weight: 600;
            font-size: 1.2rem;
        }

        .btn-time-slot.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #ccc;
        }

        .btn-time-slot.unavailable:hover {
            transform: none;
            border-color: #ccc;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .btn-primary {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            border: none;
            border-radius: 10px;
            padding: 12px 30px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
            background: linear-gradient(45deg, #FF5252, #26D0CE);
        }

        .btn-outline-secondary {
            border-radius: 10px;
            padding: 12px 30px;
            font-weight: 500;
        }

        .form-control {
            border-radius: 10px;
            border: 2px solid #e9ecef;
            padding: 12px 15px;
            transition: all 0.3s ease;
        }

        .form-control:focus {
            border-color: #FF6B6B;
            box-shadow: 0 0 0 0.2rem rgba(255, 107, 107, 0.25);
        }

        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
        }

        .calendar-navigation {
            background: #FFFFFF;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .calendar-navigation button {
            background: #FF6B6B;
            border: none;
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
            font-size: 1.2rem;
            cursor: pointer;
            outline: none;
            padding: 0;
            min-width: 45px;
            min-height: 45px;
        }

        .calendar-navigation button:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.4);
            background: #4ECDC4;
        }

        .calendar-navigation h4 {
            margin: 0;
            font-weight: 700;
            font-size: 1.5rem;
            color: #FF6B6B;
            text-shadow: none;
            letter-spacing: 1px;
        }

        @media (max-width: 768px) {
            .booking-card {
                padding: 20px;
                margin: 10px;
            }

            .step-text {
                display: none;
            }

            .step-line {
                width: 30px;
            }
        }
    </style>
</head>

<body>
    <div class="main-container">
        <div class="booking-card">
            <!-- Welcome Landing Page -->
            <div class="welcome-page" id="welcome-page">
                <div class="welcome-logo">
                    <img src="https://img2.pic.in.th/pic/_logo-removebg-previewb741755d6ce9d8e5.png"
                        alt="Restaurant Logo">
                </div>
                <div class="welcome-content">
                    <h1>ยินดีต้อนรับ</h1>
                    <p class="welcome-subtitle">เริ่มจองโต๊ะของคุณได้เลยในขั้นตอนง่ายๆ เพียง 2 ขั้นตอน</p>


                    <button type="button" class="btn start-booking-btn" id="start-booking">
                        <i class="bi bi-calendar-plus"></i> เริ่มจองโต๊ะ
                    </button>
                </div>
            </div>

            <!-- Booking Steps Container (Initially Hidden) -->
            <div class="booking-steps" id="booking-steps" style="display: none;">
                <!-- Logo Section -->
                <div class="logo-container">
                    <img src="https://img2.pic.in.th/pic/_logo-removebg-previewb741755d6ce9d8e5.png"
                        alt="Restaurant Logo">
                    <h2>จองโต๊ะร้านอาหาร</h2>
                </div>

                <!-- Step Indicator -->
                <div class="step-indicator">
                    <div class="step active" id="step-1">
                        <div class="step-number">1</div>
                        <span class="step-text">เลือกวันที่และโต๊ะ</span>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" id="step-2">
                        <div class="step-number">2</div>
                        <span class="step-text">ข้อมูลการจอง</span>
                    </div>
                </div>

                <!-- Step 1: Date and Table Selection -->
                <div class="step-content active" id="content-1">
                    <h3 class="text-center mb-4">เลือกวันที่ต้องการจองและจำนวนที่นั่ง</h3>

                    <!-- Date Selection Section -->
                    <div class="calendar-navigation">
                        <div class="d-flex justify-content-between align-items-center">
                            <button type="button" id="prev-month">
                                <i class="bi bi-chevron-left"></i>
                            </button>
                            <h4 id="current-month"></h4>
                            <button type="button" id="next-month">
                                <i class="bi bi-chevron-right"></i>
                            </button>
                        </div>
                    </div>

                    <div class="calendar-container" id="calendar">
                        <!-- Calendar will be generated here -->
                    </div>

                    <!-- Time Slot Selection Section -->
                    <div class="mt-5 p-4 bg-white rounded-4 shadow-sm border" id="time-slot-section">
                        <div class="text-center mb-4">
                            <h4 class="fw-bold mb-2" style="color: #FF6B6B;">
                                <i class="bi bi-clock-fill me-2"></i>เลือกช่วงเวลา
                            </h4>
                            <div class="divider mx-auto" style="width: 60px; height: 3px; background: linear-gradient(45deg, #FF6B6B, #4ECDC4); border-radius: 10px;"></div>
                        </div>
                        <div class="time-slot-buttons">
                            <button type="button" class="btn-time-slot unavailable" data-time="13:00" disabled>
                                <span>13:00</span>
                                <small class="availability-text">กรุณาเลือกวันที่ก่อน</small>
                            </button>
                            <button type="button" class="btn-time-slot unavailable" data-time="17:00" disabled>
                                <span>17:00</span>
                                <small class="availability-text">กรุณาเลือกวันที่ก่อน</small>
                            </button>
                            <button type="button" class="btn-time-slot unavailable" data-time="18:00" disabled>
                                <span>18:00</span>
                                <small class="availability-text">กรุณาเลือกวันที่ก่อน</small>
                            </button>
                            <button type="button" class="btn-time-slot unavailable" data-time="19:30" disabled>
                                <span>19:30</span>
                                <small class="availability-text">กรุณาเลือกวันที่ก่อน</small>
                            </button>
                        </div>
                    </div>

                    <!-- Guest Count Selection Section -->
                    <div class="mt-5 p-4 bg-white rounded-4 shadow-sm border" id="guest-count-section">
                        <div class="text-center mb-4">
                            <h4 class="fw-bold mb-2" style="color: #FF6B6B;">
                                <i class="bi bi-person-plus-fill me-2"></i>เลือกจำนวนที่นั่ง
                            </h4>
                            <div class="divider mx-auto" style="width: 60px; height: 3px; background: linear-gradient(45deg, #FF6B6B, #4ECDC4); border-radius: 10px;"></div>
                        </div>
                        <div class="guest-count-buttons">
                            <button type="button" class="btn-guest-count unavailable" data-guests="4" disabled>
                                <span>4 ที่นั่ง</span>
                                <small class="availability-text">เลือกเวลาก่อน</small>
                            </button>
                            <button type="button" class="btn-guest-count unavailable" data-guests="6" disabled>
                                <span>6 ที่นั่ง</span>
                                <small class="availability-text">เลือกเวลาก่อน</small>
                            </button>
                            <button type="button" class="btn-guest-count unavailable" data-guests="8" disabled>
                                <span>8 ที่นั่ง</span>
                                <small class="availability-text">เลือกเวลาก่อน</small>
                            </button>
                            <button type="button" class="btn-guest-count unavailable" data-guests="10" disabled>
                                <span>10 ที่นั่ง</span>
                                <small class="availability-text">เลือกเวลาก่อน</small>
                            </button>
                        </div>
                    </div>

                    <!-- Table Location Selection Section -->
                    <div class="mt-5 p-4 bg-white rounded-4 shadow-sm border" id="table-location-buttons">
                        <div class="text-center mb-4">
                            <h4 class="fw-bold mb-2" style="color: #FF6B6B;">
                                <i class="bi bi-geo-alt-fill me-2"></i>เลือกตำแหน่งโต๊ะ
                            </h4>
                            <div class="divider mx-auto" style="width: 60px; height: 3px; background: linear-gradient(45deg, #FF6B6B, #4ECDC4); border-radius: 10px;"></div>
                        </div>
                        <div class="location-buttons d-flex flex-wrap justify-content-center gap-3">
                            <button type="button" class="btn-location unavailable" data-location="upstairs" disabled>
                                <span>ชั้นบน</span>
                                <small class="availability-text">เลือกจำนวนที่นั่งก่อน</small>
                            </button>
                            <button type="button" class="btn-location unavailable" data-location="downstairs" disabled>
                                <span>ชั้นล่าง</span>
                                <small class="availability-text">เลือกจำนวนที่นั่งก่อน</small>
                            </button>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <button type="button" class="btn btn-outline-secondary me-2" id="back-to-welcome">
                            <i class="bi bi-arrow-left"></i> ย้อนกลับ
                        </button>
                        <button type="button" class="btn btn-primary" id="next-to-step2" disabled>
                            ถัดไป <i class="bi bi-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Step 2: Customer Information -->
                <div class="step-content" id="content-2">
                    <h3 class="text-center mb-4">กรอกข้อมูลการจอง</h3>

                    <form id="booking-form">
                        <div class="mb-3">
                            <label for="customer-name" class="form-label">ชื่อ-นามสกุล *</label>
                            <input type="text" class="form-control" id="customer-name" required>
                        </div>

                        <div class="mb-3">
                            <label for="customer-phone" class="form-label">เบอร์โทร *</label>
                            <input type="tel" class="form-control" id="customer-phone" required>
                        </div>

                        <div class="mb-3">
                            <label for="customer-line" class="form-label">ไลน์ไอดี *</label>
                            <input type="text" class="form-control" id="customer-line" required>
                        </div>

                        <div class="booking-summary p-3 bg-light rounded-3 mb-4">
                            <h5>สรุปการจอง</h5>
                            <p class="mb-1"><strong>วันที่:</strong> <span id="summary-date"></span></p>
                            <p class="mb-1"><strong>จำนวนที่นั่ง:</strong> <span id="summary-guests"></span> ที่นั่ง</p>
                            <p class="mb-0"><strong>ตำแหน่งโต๊ะ:</strong> <span id="summary-location"></span></p>
                        </div>

                        <div class="text-center">
                            <button type="button" class="btn btn-outline-secondary me-2" id="back-to-step1">
                                <i class="bi bi-arrow-left"></i> ย้อนกลับ
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="bi bi-check-circle"></i> ยืนยันการจอง
                            </button>
                        </div>
                    </form>
                </div>
            </div> <!-- End of booking-steps -->
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.30.1/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.30.1/locale/th.js"></script>
    <script src="https://unpkg.com/nprogress@0.2.0/nprogress.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Fallback data structure for AVAILABLE_DATES if not provided by Google Apps Script
        const AVAILABLE_DATES = <?!= availableDates ?>
    </script>
    <script>
            // Initialize AOS animation library
            AOS.init();

        // DOM ready and window load event handlers
        document.addEventListener("DOMContentLoaded", function () {
            NProgress.start();
            NProgress.inc();
            initializeApp();
        });

        window.addEventListener("load", function () {
            NProgress.done();
        });

        // Global variables
        let currentDate = new Date();
        let selectedDate = null;
        let selectedTime = null;
        let selectedGuests = null;
        let selectedLocation = null;

        // Sample restaurant data (in real app, this would come from Google Apps Script)
        const restaurantData = {
            // Sample closed days (0 = Sunday, 1 = Monday, etc.)
            closedDays: [1], // Monday closed

            // Sample full days (format: YYYY-MM-DD)
            fullDays: [],

            // Sample available locations
            availableLocations: {
                upstairs: { name: 'ชั้นบน', available: true },
                downstairs: { name: 'ชั้นล่าง', available: true }
            }
        };

        function initializeApp() {
            generateCalendar();
            setupEventListeners();
        }

        function setupEventListeners() {
            // Welcome page - Start booking button
            $('#start-booking').click(function () {
                $('#welcome-page').fadeOut(500, function () {
                    $('#booking-steps').fadeIn(500);
                });
            });

            // Calendar navigation
            $('#prev-month').click(() => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                generateCalendar();
            });

            $('#next-month').click(() => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                generateCalendar();
            });

            // Step navigation
            $('#next-to-step2').click(() => goToStep(2));
            $('#back-to-step1').click(() => goToStep(1));
            $('#back-to-welcome').click(() => goToWelcome());

            // Guest count button selection
            $(document).on('click', '.btn-guest-count:not(.unavailable)', function () {
                $('.btn-guest-count').removeClass('selected');
                $(this).addClass('selected');
                selectedGuests = $(this).data('guests');
                let location = $(this).data('location').split(',')

                // After selecting guest count, check location availability
                checkLocationAvailability(selectedDate, selectedGuests, location);
                
                // Scroll to table location section
                setTimeout(() => {
                    document.getElementById('table-location-buttons').scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }, 300);
            });

            // Time slot button selection
            $(document).on('click', '.btn-time-slot:not(.unavailable)', function () {
                $('.btn-time-slot').removeClass('selected');
                $(this).addClass('selected');
                selectedTime = $(this).data('time');
                
                // After selecting time, check available table types
                checkAvailableTableTypes(selectedDate, selectedTime);
                
                // Scroll to guest count section
                setTimeout(() => {
                    document.getElementById('guest-count-section').scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }, 300);
            });

            // Location button selection
            $(document).on('click', '.btn-location:not(.unavailable)', function () {
                $('.btn-location').removeClass('selected');
                $(this).addClass('selected');
                selectedLocation = $(this).data('location');
                updateNextButtonState();
                
                // Scroll to next button section
                setTimeout(() => {
                    document.getElementById('next-to-step2').scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }, 300);
            });

            // Form submission
            $('#booking-form').submit(function (e) {
                e.preventDefault();
                submitBooking();
            });
        }



        function generateCalendar() {
            console.log(AVAILABLE_DATES);
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();

            // Update month header
            const monthNames = [
                'มกราคม', 'กุมภาพันธ์', 'มีนาคม', 'เมษายน', 'พฤษภาคม', 'มิถุนายน',
                'กรกฎาคม', 'สิงหาคม', 'กันยายน', 'ตุลาคม', 'พฤศจิกายน', 'ธันวาคม'
            ];
            $('#current-month').text(`${monthNames[month]} ${year + 543}`);

            // Clear calendar
            $('#calendar').empty();

            // Add day headers
            const dayHeaders = ['อา', 'จ', 'อ', 'พ', 'พฤ', 'ศ', 'ส'];
            dayHeaders.forEach(day => {
                $('#calendar').append(`<div class="calendar-header">${day}</div>`);
            });

            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = new Date();

            // Add empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                $('#calendar').append('<div class="calendar-day"></div>');
            }

            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const cellDate = new Date(year, month, day);
                const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;

                let status = 'available';
                let clickable = true;

                // Check if date is in the past
                if (cellDate < today.setHours(0, 0, 0, 0)) {
                    status = 'closed';
                    clickable = false;
                }
                else if (AVAILABLE_DATES.available.findIndex(d => d.date === dateString) > -1) {
                    status = 'available';
                    clickable = true;
                }
                else if (AVAILABLE_DATES.closedDays.findIndex(d => d.date === dateString) > -1) {
                    status = 'closed';
                    clickable = false;
                }
                // Check if day is fully booked
                else if (AVAILABLE_DATES.fullDays.findIndex(d => d.date === dateString) > -1) {
                    status = 'full';
                    clickable = false;
                }

                const dayElement = $(`
            <div class="calendar-day ${status}" data-date="${dateString}" ${clickable ? 'style="cursor: pointer;"' : ''}>
                ${day}
            </div>
        `);

                if (clickable) {
                    dayElement.click(function () {
                        $('.calendar-day').removeClass('selected');
                        $(this).addClass('selected');
                        selectedDate = $(this).data('date');
                        
                        // Reset selections
                        selectedTime = null;
                        selectedGuests = null;
                        selectedLocation = null;
                        
                        // Enable time slot selection and reset guest/location sections
                        $('.btn-time-slot').removeClass('selected').addClass('unavailable').prop('disabled', true);
                        $('.btn-time-slot .availability-text').text('ปิด');
                        
                        // Reset guest count buttons to disabled state
                        $('.btn-guest-count').removeClass('selected').addClass('unavailable').prop('disabled', true);
                        $('.btn-guest-count span').text('เลือกเวลาก่อน');
                        
                        // Reset location buttons to disabled state
                        $('.btn-location').removeClass('selected').addClass('unavailable').prop('disabled', true);
                        $('.btn-location .availability-text').text('เลือกจำนวนที่นั่งก่อน');
                        
                        // Check available time slots for selected date
                        AVAILABLE_DATES.available.filter(t => t.date === selectedDate).forEach(slot => {
                            const timeSlotBtn = $(`.btn-time-slot[data-time="${slot.round}"]`);
                            timeSlotBtn.removeClass('unavailable').prop('disabled', false);
                            timeSlotBtn.find('.availability-text').text('ว่าง');
                        });
                        
                        // Check full time slots for selected date
                        if (AVAILABLE_DATES.fullDays) {
                            AVAILABLE_DATES.fullDays.filter(t => t.date === selectedDate).forEach(slot => {
                                const timeSlotBtn = $(`.btn-time-slot[data-time="${slot.round}"]`);
                                timeSlotBtn.addClass('unavailable').prop('disabled', true);
                                timeSlotBtn.find('.availability-text').text('เต็ม');
                            });
                        }
                        
                        updateNextButtonState();
                        
                        // Scroll to time slot section
                        setTimeout(() => {
                            document.getElementById('time-slot-section').scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }, 300);
                    });
                }

                $('#calendar').append(dayElement);
            }

            // Add status legend at the bottom of the calendar
            $('#calendar').append(`
                <div class="status-legend" style="grid-column: 1 / -1; margin: 20px 0 0 0;">
                    <div class="legend-item">
                        <div class="legend-color"></div>
                        <span>ว่าง</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color"></div>
                        <span>เต็มแล้ว</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color"></div>
                        <span>ร้านปิด</span>
                    </div>
                </div>
            `);
        }

        function goToStep(step) {
            // Update step indicators
            $('.step').removeClass('active completed');
            $('.step-content').removeClass('active');

            for (let i = 1; i < step; i++) {
                $(`#step-${i}`).addClass('completed');
            }
            $(`#step-${step}`).addClass('active');
            $(`#content-${step}`).addClass('active');

            // Update summary if going to step 2
            if (step === 2) {
                updateBookingSummary();
                // Scroll to top when step 2 is shown
                setTimeout(() => {
                    window.scrollTo({
                        top: 150,
                        behavior: 'smooth'
                    });
                }, 300);
            }
        }

        function goToWelcome() {
            // Reset all selections
            selectedDate = null;
            selectedTime = null;
            selectedGuests = null;
            selectedLocation = null;
            
            // Hide booking steps and show welcome page
            $('#booking-steps').fadeOut(500, function () {
                $('#welcome-page').fadeIn(500);
            });
            
            // Reset all form inputs
            $('#booking-form')[0].reset();
            
            // Reset all button states
            $('.calendar-day').removeClass('selected');
            $('.btn-time-slot').removeClass('selected').addClass('unavailable').prop('disabled', true);
            $('.btn-guest-count').removeClass('selected').addClass('unavailable').prop('disabled', true);
            $('.btn-location').removeClass('selected').addClass('unavailable').prop('disabled', true);
            $('#next-to-step2').prop('disabled', true);
            
            // Scroll to top
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function updateNextButtonState() {
            // Enable next button only if date, time, guests, and location are all selected
            const canProceed = selectedDate && selectedTime && selectedGuests && selectedLocation;
            $('#next-to-step2').prop('disabled', !canProceed);
        }

        let avilableTableTypes = [];
        function checkAvailableTableTypes(date, time) {
            $('.btn-guest-count').addClass('unavailable').prop('disabled', true);
            $('.btn-guest-count span').text('กำลังตรวจสอบ...');
            $('.btn-guest-count .availability-text').show().text('กำลังตรวจสอบ...');

            // Reset location buttons to disabled state
            $('.btn-location').removeClass('selected').addClass('unavailable').prop('disabled', true);
            $('.btn-location .availability-text').text('เลือกจำนวนที่นั่งก่อน');
            
            selectedGuests = null;
            selectedLocation = null;
            updateNextButtonState();
            
            google.script.run
                .withSuccessHandler(function (response) {
                    response = JSON.parse(response);
                    avilableTableTypes = response.map(t => t.guests)
                    console.log('Available table types:', response);
                    // Reset guest count buttons
                    $('.btn-guest-count').removeClass('unavailable selected').prop('disabled', false);

                    // Update each guest count button based on availability
                    $('.btn-guest-count').each(function () {
                        const guestCount = $(this).data('guests');
                        if (response.some(t => t.guests === guestCount)) {
                            $(this).find('span').text(`${guestCount} ที่นั่ง`);
                            $(this).data('location', response.filter(t => t.guests === guestCount).map(t => t.location).join(','))
                            $(this).find('.availability-text').hide(); // Hide availability text when available
                        } else {
                            $(this).addClass('unavailable').prop('disabled', true);
                            $(this).find('span').text(`${guestCount} ที่นั่ง (เต็ม)`);
                            $(this).data('location', '');
                            $(this).find('.availability-text').hide(); // Hide availability text when full
                        }
                    });
                })
                .withFailureHandler(function (error) {
                    console.error('Server error:', error);
                    // Reset to default state and show error
                    $('.btn-guest-count').removeClass('unavailable selected').prop('disabled', false);
                    $('.btn-guest-count').each(function () {
                        const guestCount = $(this).data('guests');
                        $(this).find('span').text(`${guestCount} ที่นั่ง`);
                        $(this).find('.availability-text').hide(); // Hide availability text on error
                    });

                    // Show error message (optional)
                    alert('เกิดข้อผิดพลาดในการตรวจสอบโต๊ะว่าง กรุณาลองใหม่อีกครั้ง');
                })
                .checkAvailableTableTypes(date, time);
        }





        function checkLocationAvailability(date, guestCount, location) {
            console.log("🚀 ~ checkLocationAvailability ~ location:", location)
            location = [...new Set(location)]; // Ensure unique locations
            // location [บน, ล่าง]
            $('.btn-location').removeClass('unavailable selected');
            let availableLocations = [];
            if(!location || location.length === 0) {
                // No locations available, disable all buttons
                $('.btn-location').addClass('unavailable').prop('disabled', true);
                $('.btn-location .availability-text').text('เลือกจำนวนที่นั่งก่อน');
                return;
            }
            if(guestCount === 10 && avilableTableTypes.includes(4) && avilableTableTypes.includes(6)) {
                // If 10 guests, both locations are available
                location.push('ล่าง')
            }

            // Update upstairs button
            const upstairsBtn = $('.btn-location[data-location="upstairs"]');
            if (location.includes('บน')) {
                upstairsBtn.removeClass('unavailable');
                upstairsBtn.find('.availability-text').text(`ว่าง`);
                availableLocations.push('upstairs');
            } else {
                upstairsBtn.addClass('unavailable');
                upstairsBtn.find('.availability-text').text('เต็มแล้ว');
            }

            // Update downstairs button
            const downstairsBtn = $('.btn-location[data-location="downstairs"]');
            if (location.includes('ล่าง')) {
                downstairsBtn.removeClass('unavailable');
                downstairsBtn.find('.availability-text').text(`ว่าง`);
                availableLocations.push('downstairs');
            } else {
                downstairsBtn.addClass('unavailable');
                downstairsBtn.find('.availability-text').text('เต็มแล้ว');
            }

            // If only one location is available, auto-select it
            if (availableLocations.length === 1) {
                selectedLocation = availableLocations[0];
                $(`.btn-location[data-location="${selectedLocation}"]`).addClass('selected');
                updateNextButtonState();
            } else {
                // Reset location selection
                selectedLocation = null;
                $('.btn-location').removeClass('selected').attr('disabled', false);
                updateNextButtonState();
            }

            // Show location selection buttons
            $('#table-location-buttons').show();
        }

        function updateBookingSummary() {
            const date = new Date(selectedDate);
            const options = {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                locale: 'th-TH'
            };

            $('#summary-date').text(date.toLocaleDateString('th-TH', options) + ' เวลา ' + selectedTime);
            $('#summary-guests').text(selectedGuests);
            $('#summary-location').text(selectedLocation === 'upstairs' ? 'ชั้นบน' : 'ชั้นล่าง');
        }

        function submitBooking() {
            
            const bookingData = {
                date: selectedDate,
                time: selectedTime,
                guests: selectedGuests,
                location: selectedLocation,
                name: $('#customer-name').val(),
                phone: $('#customer-phone').val(),
                lineId: $('#customer-line').val()
            };

            // Show loading popup
            showCustomAlert('loading', 'กำลังประมวลผล...', 'กำลังส่งข้อมูลการจอง กรุณารอสักครู่');
            sendToGoogleAppsScript(bookingData);
        }

        // Custom alert function that matches page theme
        function showCustomAlert(type, title, message, callback = null) {
            // Remove any existing alert
            $('.custom-alert-overlay').remove();

            let iconHtml = '';
            let buttonColor = '#FF6B6B';
            
            switch(type) {
                case 'loading':
                    iconHtml = '<div class="loading-spinner"></div>';
                    break;
                case 'success':
                    iconHtml = '<i class="bi bi-check-circle-fill" style="font-size: 4rem; color: #4ECDC4;"></i>';
                    buttonColor = '#4ECDC4';
                    break;
                case 'error':
                    iconHtml = '<i class="bi bi-x-circle-fill" style="font-size: 4rem; color: #FF6B6B;"></i>';
                    buttonColor = '#FF6B6B';
                    break;
            }

            const alertHtml = `
                <div class="custom-alert-overlay">
                    <div class="custom-alert-container">
                        <div class="custom-alert-icon">
                            ${iconHtml}
                        </div>
                        <h3 class="custom-alert-title">${title}</h3>
                        <p class="custom-alert-message">${message}</p>
                        ${type !== 'loading' ? `<button class="custom-alert-button" style="background: linear-gradient(45deg, ${buttonColor}, #4ECDC4);">ตกลง</button>` : ''}
                    </div>
                </div>
            `;

            // Add styles
            const alertStyles = `
                <style>
                .custom-alert-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0, 0, 0, 0.7);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 10000;
                    animation: fadeIn 0.3s ease-out;
                }
                
                .custom-alert-container {
                    background: white;
                    border-radius: 20px;
                    padding: 40px;
                    text-align: center;
                    max-width: 400px;
                    width: 90%;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                    animation: slideIn 0.3s ease-out;
                    font-family: 'Pattaya', cursive;
                }
                
                .custom-alert-icon {
                    margin-bottom: 20px;
                }
                
                .custom-alert-title {
                    color: #FF6B6B;
                    font-size: 1.8rem;
                    font-weight: 700;
                    margin-bottom: 15px;
                    font-family: 'Pattaya', cursive;
                }
                
                .custom-alert-message {
                    color: #666;
                    font-size: 1.1rem;
                    margin-bottom: 25px;
                    line-height: 1.5;
                }
                
                .custom-alert-button {
                    background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
                    border: none;
                    color: white;
                    padding: 12px 30px;
                    border-radius: 25px;
                    font-size: 1.1rem;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    font-family: 'Pattaya', cursive;
                    box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
                }
                
                .custom-alert-button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
                }
                
                .loading-spinner {
                    width: 60px;
                    height: 60px;
                    border: 4px solid #f3f3f3;
                    border-top: 4px solid #FF6B6B;
                    border-radius: 50%;
                    animation: spin 1s linear infinite;
                    margin: 0 auto;
                }
                
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                
                @keyframes slideIn {
                    from { 
                        opacity: 0;
                        transform: translateY(-30px) scale(0.9);
                    }
                    to { 
                        opacity: 1;
                        transform: translateY(0) scale(1);
                    }
                }
                
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                </style>
            `;

            // Add styles to head if not already added
            if (!$('#custom-alert-styles').length) {
                $('head').append(`<style id="custom-alert-styles">${alertStyles.replace(/<\/?style[^>]*>/g, '')}</style>`);
            }

            // Add alert to body
            $('body').append(alertHtml);

            // Add click handler for button
            $('.custom-alert-button').click(function() {
                $('.custom-alert-overlay').fadeOut(300, function() {
                    $(this).remove();
                    if (callback) callback();
                });
            });

            // Auto-close loading alerts are handled by the calling function
        }

        // Function to show booking success summary page
        function showBookingSummaryPage(bookingData) {
            // Hide booking steps
            $('#booking-steps').fadeOut(500, function() {
                // Create summary page HTML
                const summaryPageHtml = `
                    <div class="booking-success-page" id="booking-success-page">
                        <div class="text-center mb-4">
                            <div class="success-icon mb-4">
                                <i class="bi bi-check-circle-fill" style="font-size: 5rem; color: #4ECDC4;"></i>
                            </div>
                            <h1 class="success-title">จองสำเร็จ!</h1>
                            <p class="success-subtitle">เจ้าหน้าที่จะติดต่อกลับเพื่อยืนยันการจองภายใน 30 นาที</p>
                        </div>
                        
                        <div class="booking-details-card">
                            <h3 class="text-center mb-4" style="color: #FF6B6B;">รายละเอียดการจอง</h3>
                            
                            <div class="detail-row">
                                <div class="detail-label">
                                    <i class="bi bi-calendar-event me-2"></i>วันที่และเวลา
                                </div>
                                <div class="detail-value">${formatBookingDate(bookingData.date)} เวลา ${bookingData.time}</div>
                            </div>
                            
                            <div class="detail-row">
                                <div class="detail-label">
                                    <i class="bi bi-people me-2"></i>จำนวนที่นั่ง
                                </div>
                                <div class="detail-value">${bookingData.guests} ที่นั่ง</div>
                            </div>
                            
                            <div class="detail-row">
                                <div class="detail-label">
                                    <i class="bi bi-geo-alt me-2"></i>ตำแหน่งโต๊ะ
                                </div>
                                <div class="detail-value">${bookingData.location === 'upstairs' ? 'ชั้นบน' : 'ชั้นล่าง'}</div>
                            </div>
                            
                            <div class="detail-row">
                                <div class="detail-label">
                                    <i class="bi bi-person me-2"></i>ชื่อผู้จอง
                                </div>
                                <div class="detail-value">${bookingData.name}</div>
                            </div>
                            
                            <div class="detail-row">
                                <div class="detail-label">
                                    <i class="bi bi-telephone me-2"></i>เบอร์โทร
                                </div>
                                <div class="detail-value">${bookingData.phone}</div>
                            </div>
                            
                            <div class="detail-row">
                                <div class="detail-label">
                                    <i class="bi bi-chat-dots me-2"></i>ไลน์ไอดี
                                </div>
                                <div class="detail-value">${bookingData.lineId}</div>
                            </div>
                        </div>
                        
                        <div class="text-center mt-4">
                            <button type="button" class="btn btn-primary btn-lg" id="new-booking-btn">
                                <i class="bi bi-plus-circle me-2"></i>จองโต๊ะเพิ่ม
                            </button>
                        </div>
                    </div>
                `;
                
                // Add summary page styles
                const summaryStyles = `
                    <style>
                    .booking-success-page {
                        padding: 40px;
                        max-width: 600px;
                        margin: 0 auto;
                        font-family: 'Pattaya', cursive;
                    }
                    
                    .success-icon {
                        animation: successBounce 0.6s ease-out;
                    }
                    
                    .success-title {
                        font-size: 3rem;
                        font-weight: bold;
                        color: #4ECDC4;
                        margin-bottom: 20px;
                        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
                    }
                    
                    .success-subtitle {
                        font-size: 1.3rem;
                        color: #666;
                        margin-bottom: 40px;
                        line-height: 1.5;
                    }
                    
                    .booking-details-card {
                        background: white;
                        border-radius: 20px;
                        padding: 30px;
                        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
                        margin-bottom: 30px;
                        border: 2px solid #f8f9fa;
                    }
                    
                    .detail-row {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        padding: 15px 0;
                        border-bottom: 1px solid #f0f0f0;
                    }
                    
                    .detail-row:last-child {
                        border-bottom: none;
                    }
                    
                    .detail-label {
                        font-weight: 600;
                        color: #FF6B6B;
                        font-size: 1.1rem;
                        display: flex;
                        align-items: center;
                    }
                    
                    .detail-value {
                        font-weight: 500;
                        color: #333;
                        font-size: 1.1rem;
                        text-align: right;
                    }
                    
                    @keyframes successBounce {
                        0% {
                            transform: scale(0);
                            opacity: 0;
                        }
                        50% {
                            transform: scale(1.2);
                            opacity: 1;
                        }
                        100% {
                            transform: scale(1);
                            opacity: 1;
                        }
                    }
                    
                    @media (max-width: 768px) {
                        .booking-success-page {
                            padding: 20px;
                        }
                        
                        .success-title {
                            font-size: 2.5rem;
                        }
                        
                        .success-subtitle {
                            font-size: 1.1rem;
                        }
                        
                        .detail-row {
                            flex-direction: column;
                            align-items: flex-start;
                            gap: 8px;
                        }
                        
                        .detail-value {
                            text-align: left;
                        }
                    }
                    </style>
                `;
                
                // Add styles if not already added
                if (!$('#summary-styles').length) {
                    $('head').append(`<style id="summary-styles">${summaryStyles.replace(/<\/?style[^>]*>/g, '')}</style>`);
                }
                
                // Insert summary page
                $('.booking-card').append(summaryPageHtml);
                
                // Fade in summary page
                $('#booking-success-page').hide().fadeIn(500);
                
                // Scroll to top
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
                
                // Add event listener for new booking button
                $('#new-booking-btn').click(function() {
                    window.open("<?!= scriptUrl ?>", '_top');
                });
            });
        }

        // Helper function to format booking date
        function formatBookingDate(dateString) {
            const date = new Date(dateString);
            const options = {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                locale: 'th-TH'
            };
            return date.toLocaleDateString('th-TH', options);
        }        // Google Apps Script integration function (to be implemented)
        function sendToGoogleAppsScript(data) {
            console.log("🚀 ~ sendToGoogleAppsScript ~ data:", data);
            // Call Google Apps Script function to handle booking
            google.script.run
                .withSuccessHandler(function(response) {
                    response = JSON.parse(response);
                    if(!response.success) {
                        showCustomAlert('error', 'จองไม่สำเร็จ!', response.message, function() {
                        });
                        return;
                    }
                    // Remove loading alert
                    $('.custom-alert-overlay').fadeOut(300, function() {
                        $(this).remove();
                    });
                    
                    // Show booking summary page with form data
                    showBookingSummaryPage(data);
                })
                .withFailureHandler(function(error) {
                    console.error('Error sending booking:', error);
                    showCustomAlert('error', 'เกิดข้อผิดพลาด!', 'ไม่สามารถส่งข้อมูลการจองได้ กรุณาลองใหม่อีกครั้ง');
                })
                .submitBooking(data);
        }
    </script>
</body>

</html>