<!DOCTYPE html>
<html lang="en">

<head>
    <!-- no cache -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <!-- no cache -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>จองโต๊ะร้านอาหาร</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
        integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/nprogress@0.2.0/nprogress.css">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
        * {
            font-family: 'Noto Sans Thai', sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #1C4200;
            color: #333333;
            min-height: 100vh;
        }

        /* Welcome Landing Page Styles */
        .welcome-page {
            text-align: center;
            padding: 60px 20px;
        }

        .welcome-logo {
            margin-bottom: 40px;
        }

        .welcome-logo img {
            max-width: 190px;
            height: auto;
            filter: drop-shadow(0 10px 25px rgba(0, 0, 0, 0.15));
        }

        .welcome-content h1 {
            font-size: 3.5rem;
            font-weight: bold;
            color: #333333;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(255, 255, 255, 0.3);
        }

        .welcome-content p {
            font-size: 1.6rem;
            color: #333333;
            margin-bottom: 15px;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.3);
        }

        .welcome-subtitle {
            font-size: 1.2rem !important;
            opacity: 0.9;
            margin-bottom: 40px !important;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            color: #333333 !important;
        }

        .start-booking-btn {
            font-size: 1rem;
            padding: 10px 45px;
            border-radius: 50px;
            background-color: #997e45;
            color: #ffffff;
            border: none;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .start-booking-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
            background-color: #7a6336;
            color: #ffffff;
        }

        .start-booking-btn:focus {
            background-color: #7a6336;
            color: #ffffff;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        /* English Version Button Styles */
        #english-version-btn {
            font-size: 0.9rem;
            padding: 8px 30px;
            border-radius: 25px;
            background-color: transparent;
            color: #997e45;
            border: 2px solid #997e45;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        #english-version-btn:hover {
            background-color: #997e45;
            color: #ffffff;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(153, 126, 69, 0.3);
        }

        #english-version-btn:focus {
            background-color: #997e45;
            color: #ffffff;
            box-shadow: 0 6px 20px rgba(153, 126, 69, 0.3);
        }

        /* Announcement Message Styles */
        .announcement-message {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin: 40px auto;
            max-width: 800px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #997e45;
        }

        .thai-text {
            font-size: 1.1rem !important;
            line-height: 1.7;
            color: #333333 !important;
            margin-bottom: 0 !important;
            text-align: left;
        }

        .english-text {
            font-size: 1rem !important;
            line-height: 1.6;
            color: #555555 !important;
            margin-bottom: 0 !important;
            text-align: left;
            font-style: italic;
        }

        .divider {
            border: none;
            height: 1px;
            background: linear-gradient(to right, transparent, #997e45, transparent);
            margin: 25px 0;
        }

        /* Responsive Welcome */
        @media (max-width: 768px) {
            .welcome-page {
                padding: 40px 15px;
            }

            .welcome-content h1 {
                font-size: 2.5rem;
            }

            .welcome-content p {
                font-size: 1.3rem;
            }

            .welcome-logo img {
                max-width: 170px;
            }

            .start-booking-btn {
                font-size: 1rem;
                padding: 10px 35px;
            }

            .announcement-message {
                padding: 20px;
                margin: 30px auto;
            }

            .thai-text {
                font-size: 1rem !important;
            }

            .english-text {
                font-size: 0.9rem !important;
            }
        }

        @media (max-width: 480px) {
            .welcome-page {
                padding: 30px 10px;
            }

            .welcome-content h1 {
                font-size: 2rem;
            }

            .welcome-content p {
                font-size: 1.1rem;
            }

            .welcome-logo img {
                max-width: 140px;
            }

            .start-booking-btn {
                font-size: 1rem;
                padding: 10px 30px;
            }

            .announcement-message {
                padding: 15px;
                margin: 20px auto;
            }

            .thai-text {
                font-size: 0.95rem !important;
                line-height: 1.6;
            }

            .english-text {
                font-size: 0.85rem !important;
                line-height: 1.5;
            }
        }

        .main-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px 0;
        }

        .booking-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            margin: 20px;
            color: #333333;
        }

        .logo-container {
            text-align: center;
            margin-bottom: 30px;
            padding: 40px;
        }

        .logo-container img {
            max-width: 120px;
            height: auto;
            margin-bottom: 20px;
        }

        .logo-container h2 {
            color: #333333;
            font-weight: 700;
            margin: 0;
            font-family: 'Noto Sans Thai', sans-serif;
            font-size: 2.2rem;
        }

        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 40px;
        }

        .step {
            display: flex;
            align-items: center;
            margin: 0 10px;
        }

        .step-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e9ecef;
            color: #6c757d;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 10px;
        }

        .step.active .step-number {
            background: #997e45;
            color: white;
        }

        .step.completed .step-number {
            background: #997e45;
            color: white;
        }

        .step-line {
            width: 50px;
            height: 2px;
            background: #e9ecef;
            margin: 0 10px;
            align-self: center;
        }

        .step.completed+.step-line {
            background: #997e45;
        }

        .calendar-container {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin: 30px 0;
            padding: 20px;
            background: #FFFFFF;
            border-radius: 10px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #e9ecef;
        }

        @media (max-width: 480px) {
            .calendar-container {
                gap: 4px;
                padding: 8px;
            }
        }

        .calendar-header {
            text-align: center;
            font-weight: bold;
            padding: 10px 5px;
            background: #997e45;
            color: white;
            border-radius: 5px;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        .calendar-day {
            aspect-ratio: 1;
            border: none;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            /* background: #1C4200; */
            color: #fff;
            transition: background 0.2s, color 0.2s;
        }

        .calendar-day:hover {
            background: #f8f9fa;
        }

        .calendar-day.available {
            background: #1C4200;
            color: #fff;
            font-weight: 700;
        }

        .calendar-day.available:hover {
            background: #285c00;
            color: #fff;
        }

        .calendar-day.full {
            background: #ffe6e6;
            border-color: #ff9999;
            color: #cc0000;
            cursor: not-allowed;
        }

        .calendar-day.closed {
            background: #f5f5f5;
            border-color: #cccccc;
            color: #999999;
            cursor: not-allowed;
        }

        .calendar-day.selected {
            background: #997e45;
            color: #fff;
            font-weight: bold;
        }

        .status-legend {
            display: flex;
            justify-content: center;
            /* gap: 30px; */
            margin: 30px 0;
            font-size: 15px;
            /* padding: 20px; */
            background: #FFFFFF;
            /* border-radius: 15px; */
            /* box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05); */
            /* backdrop-filter: blur(10px); */
            /* border: 1px solid rgba(255, 255, 255, 0.3); */
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            border-radius: 25px;
            /* background: #F8F9FA; */
            transition: all 0.3s ease;
            font-weight: 500;
            font-size: smaller
        }

        .legend-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            background: #FFFFFF;
        }

        .legend-color {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            border: 2px solid rgba(255, 255, 255, 0.8);
            /* box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); */
        }

        .legend-item:nth-child(1) .legend-color {
            background: #1C4200;
        }

        .legend-item:nth-child(2) .legend-color {
            background: #fbeaea;
            border-color: #e57373;
        }

        .legend-item:nth-child(3) .legend-color {
            background: #f3f3f3;
            border-color: #d3cfc7;
        }

        .seat-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .seat-option {
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .seat-option:hover {
            border-color: #FF6B6B;
            transform: translateY(-2px);
        }

        .seat-option.selected {
            border-color: #FF6B6B;
            background: #FFF5F5;
        }

        /* Button Slot Styles */
        .btn-guest-count,
        .btn-location {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 10px 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            min-width: 120px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            width: 100%;
        }

        .btn-guest-count.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #ccc;
        }

        @media (max-width: 480px) {

            .btn-guest-count,
            .btn-location {
                min-width: 100%;
                padding: 10px 20px;
                font-size: 0.9rem;
            }
        }

        .btn-guest-count:hover,
        .btn-location:hover {
            border-color: #997e45;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(153, 126, 69, 0.2);
        }

        .btn-guest-count.selected,
        .btn-location.selected {
            border-color: #997e45;
            background: #997e45;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(153, 126, 69, 0.3);
        }

        .btn-guest-count i,
        .btn-location i {
            font-size: 1.5rem;
            color: #997e45;
        }

        .btn-guest-count.selected i,
        .btn-location.selected i {
            color: white;
        }

        .btn-guest-count span,
        .btn-location span {
            font-weight: 600;
            font-size: 1rem;
        }

        .availability-text {
            font-size: 0.8rem;
            opacity: 0.8;
            font-weight: 400;
        }

        .btn-location.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #ccc;
        }

        .btn-location.unavailable:hover {
            transform: none;
            border-color: #ccc;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        @media (max-width: 768px) {

            .guest-count-buttons,
            .location-buttons {
                gap: 10px !important;
            }

            .btn-guest-count,
            .btn-location {
                min-width: 100px;
                padding: 10px 20px;
            }

            .location-buttons {
                flex-direction: column;
                align-items: center;
                max-width: 300px;
                margin: 0 auto;
            }
        }

        /* Guest Count Buttons Grid Layout */
        .guest-count-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            max-width: 400px;
            margin: 0 auto;
        }

        .guest-count-buttons .btn-guest-count {
            min-width: 160px;
        }

        @media (max-width: 480px) {
            .guest-count-buttons {
                grid-template-columns: 1fr;
                max-width: 300px;
                gap: 12px;
            }

            .guest-count-buttons .btn-guest-count {
                min-width: 100%;
            }
        }

        /* Time Slot Buttons Grid Layout */
        /* .time-slot-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            max-width: 400px;
            margin: 0 auto;
        } */

        @media (max-width: 480px) {
            .time-slot-buttons {
                grid-template-columns: 1fr;
                max-width: 300px;
                gap: 12px;
            }
        }

        .btn-time-slot {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 20px 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            min-width: 160px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            width: 100%;
        }

        @media (max-width: 480px) {
            .btn-time-slot {
                min-width: 100%;
                padding: 15px 20px;
            }
        }

        .btn-time-slot:hover {
            border-color: #997e45;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(153, 126, 69, 0.2);
        }

        .btn-time-slot.selected {
            border-color: #997e45;
            background: #997e45;
            color: white;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(153, 126, 69, 0.3);
        }

        .btn-time-slot span {
            font-weight: 600;
            font-size: 1.2rem;
        }

        .btn-time-slot.unavailable {
            opacity: 0.5;
            cursor: not-allowed;
            border-color: #ccc;
        }

        .btn-time-slot.unavailable:hover {
            transform: none;
            border-color: #ccc;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
        }

        .btn-primary {
            background: #997e45 !important;
            border-color: #997e45 !important;
            color: white !important;
            border-radius: 10px;
            padding: 12px 30px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(153, 126, 69, 0.3);
            background: #7a6336 !important;
            border-color: #7a6336 !important;
            color: white !important;
        }

        .btn-primary:focus,
        .btn-primary:active,
        .btn-primary.active {
            background: #7a6336 !important;
            border-color: #7a6336 !important;
            color: white !important;
            box-shadow: 0 0 0 0.2rem rgba(153, 126, 69, 0.25);
        }

        .btn-primary:disabled {
            background: #cccccc !important;
            border-color: #cccccc !important;
            color: #666666 !important;
            opacity: 0.6;
        }

        .btn-outline-secondary {
            border: 2px solid #997e45;
            color: #997e45;
            background: transparent;
            border-radius: 10px;
            padding: 12px 30px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-outline-secondary:hover {
            background: #997e45;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(153, 126, 69, 0.3);
        }

        .btn-outline-secondary:focus {
            background: #997e45;
            color: white;
            border-color: #997e45;
            box-shadow: 0 0 0 0.2rem rgba(153, 126, 69, 0.25);
        }

        .form-control, .form-select{
            border-radius: 10px;
            border: 2px solid #e9ecef;
            padding: 12px 15px;
            transition: all 0.3s ease;
        }

        .form-control:focus, .form-select:focus {
            border-color: #997e45;
            box-shadow: 0 0 0 0.2rem rgba(153, 126, 69, 0.25);
        }

        .step-content {
            display: none;
        }

        .step-content.active {
            display: block;
        }

        .calendar-navigation {
            background: #fff;
            border-radius: 16px;
            padding: 18px 24px;
            margin-bottom: 18px;
            box-shadow: 0 6px 24px rgba(153, 126, 69, 0.08);
            border: none;
        }

        .calendar-navigation button {
            background: #f7f5ef;
            border: none;
            color: #997e45;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.35rem;
            cursor: pointer;
            outline: none;
            box-shadow: 0 2px 8px rgba(153, 126, 69, 0.10);
            transition: background 0.2s, color 0.2s, box-shadow 0.2s;
        }

        .calendar-navigation button:hover {
            background: #997e45;
            color: #fff;
            box-shadow: 0 6px 18px rgba(153, 126, 69, 0.18);
        }

        .calendar-navigation h4 {
            margin: 0 18px;
            font-weight: 700;
            font-size: 1.15rem;
            color: #997e45;
            letter-spacing: 1px;
        }

        /* Date Selection Button Styles */
        #show-calendar-btn {
            background: #997e45;
            border: none;
            color: white;
            padding: 10px 40px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 600;
            box-shadow: 0 8px 25px rgba(153, 126, 69, 0.3);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            min-width: 200px;
        }

        #show-calendar-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 35px rgba(153, 126, 69, 0.4);
            background: #7a6336;
        }

        #show-calendar-btn:active {
            transform: translateY(-1px) scale(1.02);
        }

        #show-calendar-btn i {
            font-size: 1.3rem;
        }

        @media (max-width: 768px) {
            #show-calendar-btn {
                padding: 10px 30px;
                font-size: 1rem;
                min-width: 180px;
            }
        }

        @media (max-width: 768px) {
            .booking-card {
                padding: 20px;
                margin: 10px;
            }

            .step-text {
                display: none;
            }

            .step-line {
                width: 30px;
            }
        }

        .booking-success-page {
            padding: 40px;
            max-width: 600px;
            margin: 0 auto;
            font-family: 'Noto Sans Thai', sans-serif;
        }

        .success-icon {
            animation: successBounce 0.6s ease-out;
        }

        .success-title {
            font-size: 3rem;
            font-weight: bold;
            color: #333333;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .success-subtitle {
            font-size: 1.3rem;
            color: #333333;
            margin-bottom: 40px;
            line-height: 1.5;
        }

        .booking-details-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
            border: 2px solid #f8f9fa;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: 600;
            color: #333333;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
        }

        .detail-value {
            font-weight: 500;
            color: #333;
            font-size: 1.1rem;
            text-align: right;
        }

        @keyframes successBounce {
            0% {
                transform: scale(0);
                opacity: 0;
            }

            50% {
                transform: scale(1.2);
                opacity: 1;
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .booking-success-page {
                padding: 20px;
            }

            .success-title {
                font-size: 2.5rem;
            }

            .success-subtitle {
                font-size: 1.1rem;
            }

            .detail-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }

            .detail-value {
                text-align: left;
            }
        }
    </style>
</head>

<body>
    <div class="main-container">
        <div class="booking-card">
            <!-- Welcome Landing Page -->
            <div class="welcome-page" id="welcome-page">
                <div class="welcome-logo">
                    <img src="https://img2.pic.in.th/pic/_logo-removebg-previewb741755d6ce9d8e5.png"
                        alt="Restaurant Logo">
                </div>
                <div class="welcome-content">
                    <!-- <div class="fw-bold">ยินดีต้อนรับสู่ "แสงท่าเตียน"</div> -->
                    <div class="announcement-message">
                        <p class="thai-text">
                            <strong>ยินดีต้อนรับสู่ “แสงท่าเตียน”</strong> — ร้านอาหารไทยเล็ก ๆ
                            ที่เต็มไปด้วยความตั้งใจ<br>
                            แสงท่าเตียนนำเสนอประสบการณ์อาหารในรูปแบบ Course Sharing — ทุกจานถูกจัดวางมาในสำรับ
                            เพื่อแบ่งปันกันบนโต๊ะอย่างอบอุ่น<br>
                            เมนูของเราเรียบง่ายแต่มีเรื่องเล่า ทุกอย่างล้วนมาจากสูตรในครอบครัวของบ้านเชฟโอม
                            ที่ผสมผสานความทรงจำในวัยเยาว์กับวัตถุดิบตามฤดูกาลที่คัดสรรอย่างพิถีพิถัน
                        </p>

                        <hr class="divider">

                        <p class="english-text">
                            <strong>Welcome to Sang Thatien</strong> — a small space filled with heart and
                            intention.<br><br>
                            Here, we serve food in a course sharing style — thoughtfully plated in sets to be shared at
                            the table, just like at home.<br><br>
                            Our menu is simple, but every dish tells a story. Each recipe comes from Chef Ohm's family
                            kitchen, blending childhood memories with carefully selected seasonal ingredients.
                        </p>
                    </div>
                    <div class="row justify-content-center">
                        <div class="col-sm-5">
                            <div class="d-flex flex-column justify-content-center">
                                <button type="button" class="btn start-booking-btn" id="start-booking">
                                    <i class="bi bi-calendar-plus"></i> เริ่มจองโต๊ะ
                                </button>
                                <button type="button" class="btn btn-outline-light mt-3" id="english-version-btn">
                                    <i class="bi bi-globe"></i> Start Booking (English)
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Booking Steps Container (Initially Hidden) -->
            <div class="booking-steps" id="booking-steps" style="display: none;">
                <!-- Logo Section -->
                <div class="logo-container">
                    <img src="https://img2.pic.in.th/pic/_logo-removebg-previewb741755d6ce9d8e5.png"
                        alt="Restaurant Logo">
                    <h2>จองโต๊ะร้านอาหาร</h2>
                </div>

                <!-- Step Indicator -->
                <div class="step-indicator">
                    <div class="step active" id="step-1">
                        <div class="step-number">1</div>
                        <span class="step-text">เลือกวันที่และโต๊ะ</span>
                    </div>
                    <div class="step-line"></div>
                    <div class="step" id="step-2">
                        <div class="step-number">2</div>
                        <span class="step-text">ข้อมูลการจอง</span>
                    </div>
                </div>

                <!-- Step 1: Date and Table Selection -->
                <div class="step-content active" id="content-1">
                    <h3 class="text-center mb-4" style="color: #333333;" id="step-1-title">
                        เลือกวันที่ต้องการจองและจำนวนที่นั่ง
                    </h3>

                    <!-- Date Selection Button removed -->

                    <!-- Date Selection Section (Initially Hidden) -->
                    <div class="calendar-section" id="calendar-section">
                        <div class="calendar-navigation">
                            <div class="d-flex justify-content-between align-items-center">
                                <button type="button" id="prev-month">
                                    <i class="bi bi-chevron-left"></i>
                                </button>
                                <h4 id="current-month"></h4>
                                <button type="button" id="next-month">
                                    <i class="bi bi-chevron-right"></i>
                                </button>
                            </div>
                        </div>

                        <div class="calendar-container" id="calendar">
                            <!-- Calendar will be generated here -->
                        </div>
                    </div>

                    <!-- Time Slot Selection Section (Initially Hidden) -->
                    <div class="mt-5 p-4 bg-white rounded-4 shadow-sm border" id="time-slot-section"
                        style="display: none;">
                        <div class="text-center mb-4">
                            <h4 class="fw-bold mb-2" style="color: #333333;" id="time-slot-title">
                                <i class="bi bi-clock-fill me-2"></i>เลือกช่วงเวลา
                            </h4>
                            <div class="divider mx-auto"
                                style="width: 60px; height: 3px; background: #997e45; border-radius: 10px;"></div>
                        </div>
                        <div class="time-slot-buttons d-flex flex-md-row flex-column gap-3 justify-content-center">
                            <button type="button" class="btn-time-slot unavailable" data-time="13:00" disabled>
                                <span>13:00</span>
                                <small class="availability-text">กรุณาเลือกวันที่ก่อน</small>
                            </button>
                            <button type="button" class="btn-time-slot unavailable" data-time="17:00" disabled>
                                <span>17:00</span>
                                <small class="availability-text">กรุณาเลือกวันที่ก่อน</small>
                            </button>
                            <button type="button" class="btn-time-slot unavailable" data-time="19:30" disabled>
                                <span>19:30</span>
                                <small class="availability-text">กรุณาเลือกวันที่ก่อน</small>
                            </button>
                        </div>
                    </div>

                    <!-- Guest Count Selection Section (Initially Hidden) -->
                    <div class="mt-5 p-4 bg-white rounded-4 shadow-sm border" id="guest-count-section"
                        style="display: none;">
                        <div class="text-center mb-4">
                            <h4 class="fw-bold mb-2" style="color: #333333;" id="guest-count-title">
                                <i class="bi bi-person-plus-fill me-2"></i>เลือกจำนวนที่นั่ง
                            </h4>
                            <div class="divider mx-auto"
                                style="width: 60px; height: 3px; background: #997e45; border-radius: 10px;"></div>
                        </div>
                        <div class="guest-count-buttons">
                            <button type="button" class="btn-guest-count unavailable" data-guests="4" disabled>
                                <span>4 ที่นั่ง</span>
                                <small class="availability-text">เลือกเวลาก่อน</small>
                            </button>
                            <button type="button" class="btn-guest-count unavailable" data-guests="6" disabled>
                                <span>6 ที่นั่ง</span>
                                <small class="availability-text">เลือกเวลาก่อน</small>
                            </button>
                            <button type="button" class="btn-guest-count unavailable" data-guests="8" disabled>
                                <span>8 ที่นั่ง</span>
                                <small class="availability-text">เลือกเวลาก่อน</small>
                            </button>
                            <button type="button" class="btn-guest-count unavailable" data-guests="10" disabled>
                                <span>10 ที่นั่ง</span>
                                <small class="availability-text">เลือกเวลาก่อน</small>
                            </button>
                        </div>
                    </div>

                    <!-- Table Location Selection Section (Initially Hidden) -->
                    <div class="mt-5 p-4 bg-white rounded-4 shadow-sm border" id="table-location-buttons"
                        style="display: none;">
                        <div class="text-center mb-4">
                            <h4 class="fw-bold mb-2" style="color: #333333;" id="location-title">
                                <i class="bi bi-geo-alt-fill me-2"></i>เลือกตำแหน่งโต๊ะ
                            </h4>
                            <div class="divider mx-auto"
                                style="width: 60px; height: 3px; background: #997e45; border-radius: 10px;"></div>
                        </div>
                        <div class="location-buttons d-flex justify-content-center gap-3">
                            <button type="button" class="btn-location unavailable" data-location="downstairs" disabled>
                                <span>ชั้นล่าง</span>
                                <small class="availability-text">เลือกจำนวนที่นั่งก่อน</small>
                            </button>
                            <button type="button" class="btn-location unavailable" data-location="upstairs" disabled>
                                <span>ชั้นบน</span>
                                <small class="availability-text">เลือกจำนวนที่นั่งก่อน</small>
                            </button>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <button type="button" class="btn btn-outline-secondary me-2" id="back-to-welcome">
                            <i class="bi bi-arrow-left"></i> ย้อนกลับ
                        </button>
                        <button type="button" class="btn btn-primary" id="next-to-step2" disabled>
                            ถัดไป <i class="bi bi-arrow-right"></i>
                        </button>
                    </div>
                </div>

                <!-- Step 2: Customer Information -->
                <div class="step-content" id="content-2">
                    <h3 class="text-center mb-4" style="color: #333333;" id="step-2-title">
                        กรอกข้อมูลการจอง
                    </h3>

                    <form id="booking-form">
                        <div class="mb-3 row">
                            <div class="col-md-6 mb-2 mb-md-0">
                                <label for="customer-title" class="form-label">คำนำหน้า *</label>
                                <select class="form-select" id="customer-title" required>
                                    <option value="" selected disabled>เลือก</option>
                                    <option value="นาย">นาย</option>
                                    <option value="นาง">นาง</option>
                                    <option value="นางสาว">นางสาว</option>
                                    <option value="อื่นๆ">อื่นๆ</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-2 mb-md-0" id="custom-title-input" style="display: none;">
                                <label for="customer-title-custom" class="form-label">กรุณากรอกคำนำหน้า *</label>
                                <input type="text" id="customer-title-custom" value="" class="form-control">
                            </div>
                        </div>
                        <div class="mb-3 row">
                            <div class="col-md-6 mb-2 mb-md-0">
                                <label for="customer-firstname" class="form-label">ชื่อ *</label>
                                <input type="text" class="form-control" id="customer-firstname" required>
                            </div>
                            <div class="col-md-6 mb-2 mb-md-0">
                                <label for="customer-lastname" class="form-label">นามสกุล *</label>
                                <input type="text" class="form-control" id="customer-lastname" required>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="customer-phone" class="form-label">เบอร์โทร *</label>
                            <input type="tel" class="form-control" id="customer-phone" required>
                        </div>

                        <div class="mb-3">
                            <label for="customer-email" class="form-label">อีเมล *</label>
                            <input type="email" class="form-control" id="customer-email" required>
                        </div>

                        <div class="booking-summary p-3 bg-light rounded-3 mb-4">
                            <h5 style="color: #333333;" id="summary-title">
                                สรุปการจอง
                            </h5>
                            <p class="mb-1" style="color: #333333;"><strong>วันที่:</strong> <span
                                    id="summary-date"></span></p>
                            <p class="mb-1" style="color: #333333;"><strong>จำนวนที่นั่ง:</strong> <span
                                    id="summary-guests"></span>
                            </p>
                            <p class="mb-0" style="color: #333333;"><strong>ตำแหน่งโต๊ะ:</strong> <span
                                    id="summary-location"></span></p>
                        </div>

                        <div class="text-center">
                            <!-- Menu of the Month Photo Section -->
                            <div class="menu-of-month-section mb-4">
                                <h5 style="color: #997e45;" class="mb-3" id="menu-of-month-title">
                                    <i class="bi bi-image me-2"></i> เมนูประจำเดือน
                                </h5>
                                <div class="menu-photo-wrapper text-center">
                                    <img src="<?= getMenuImage() ?>" alt="Menu of the Month"
                                        style="max-width: 100%; border-radius: 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.08);">
                                    <div class="mt-2" style="color: #555; font-size: 0.95rem;" id="menu-of-month-note">
                                        * เมนูประจำเดือนอาจมีการเปลี่ยนแปลงตามวัตถุดิบและฤดูกาล</div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-outline-secondary me-2" id="back-to-step1">
                                <i class="bi bi-arrow-left"></i> ย้อนกลับ
                            </button>
                            <button type="submit" class="btn btn-primary" id="confirm-booking">
                                <i class="bi bi-check-circle"></i> ยืนยันการจอง
                            </button>
                        </div>
                    </form>
                </div>
            </div> <!-- End of booking-steps -->
        </div>
    </div>
    <div id="bookingSuccessPageTemplate" style="display: none;">
        <div class="booking-success-page" id="booking-success-page">
            <div class="text-center mb-4">
                <div class="success-icon mb-4">
                    <i class="bi bi-check-circle-fill" style="font-size: 5rem; color: #28a745;"></i>
                </div>
                <h1 class="success-title">จองสำเร็จ!</h1>
                <p class="success-subtitle">
                    เจ้าหน้าที่จะติดต่อกลับเพื่อยืนยันการจอง.
                    <br>
                    กรุณาตรวจสอบอีเมลของคุณเพื่อดูข้อมูลสรุปการจอง.
                    <br>
                <div
                    style="background: #fff8e1; border: 2px solid #997e45; border-radius: 16px; padding: 24px 18px; margin: 24px 0; box-shadow: 0 4px 18px rgba(153,126,69,0.10); display: flex; align-items: center; gap: 18px; justify-content: center; font-family: 'Noto Sans Thai', sans-serif; flex-direction: column;">
                    <div style="flex-shrink:0;">
                        <i class="bi bi-exclamation-triangle-fill" style="font-size: 2.5rem; color: #997e45;"></i>
                    </div>
                    <div>
                        <div style="font-size: 1.25rem; font-weight: bold; color: #997e45; margin-bottom: 8px;"
                            id="booking-confirmation-title">
                            กรุณายืนยันการจอง
                        </div>
                        <div style="font-size: 1.05rem; color: #333; margin-bottom: 10px;"
                            id="booking-confirmation-message">
                            เพื่อให้การจองสมบูรณ์ <b>คุณต้อง</b> คลิกลิงก์ด้านล่างและส่งรหัสการจองให้เจ้าหน้าที่ทาง
                            LINE
                        </div>
                        <a href="https://line.me/R/oaMessage/@sangthatien/?${{bookingId}}" target="_blank"
                            style="display: inline-block; background: #01c301; color: #fff; font-weight: 700; font-size: 1.1rem; padding: 12px 28px; border-radius: 8px; text-decoration: none; box-shadow: 0 2px 10px rgba(28,66,0,0.12); transition: background 0.2s;">
                            <i class="bi bi-line me-2"></i>
                            <span id="booking-confirmation-link">
                                คลิกเพื่อยืนยันการจองผ่าน LINE
                            </span>
                        </a>
                        <div style="font-size: 0.98rem; color: #997e45; margin-top: 10px;"
                            id="booking-confirmation-note">
                            การจองจะได้รับการยืนยันหลังจากคุณติดต่อเจ้าหน้าที่ทางบัญชี Line Official ของเรา.
                        </div>
                    </div>
                </div>
                </p>
            </div>

            <div class="booking-details-card">
                <h3 class="text-center mb-4" style="color: #333333;" id="booking-details-title">รายละเอียดการจอง</h3>
                <div class="detail-row">
                    <div class="detail-label">
                        <i class="bi bi-calendar-check me-2"></i>
                        <span id="booking-id-label">
                            รหัสการจอง
                        </span>
                    </div>
                    <div class="detail-value d-flex align-items-center gap-2">
                        <span id="booking-id-value">{{bookingId}}</span><i class="bi bi-clipboard ms-2"
                            id="copy-booking-id-btn" title="คัดลอกแล้ว!" data-bs-trigger="manual"
                            style="cursor: pointer;"></i>
                    </div>
                </div>

                <div class="detail-row">
                    <div class="detail-label">
                        <i class="bi bi-calendar-event me-2"></i>
                        <span id="booking-date-label">
                            วันที่และเวลาจอง
                        </span>
                    </div>
                    <div class="detail-value">{{bookingDate}}</div>
                </div>

                <div class="detail-row">
                    <div class="detail-label">
                        <i class="bi bi-people me-2"></i>
                        <span id="booking-guests-label">
                            จำนวนที่นั่ง
                        </span>
                    </div>
                    <div class="detail-value">{{bookingGuests}}</div>
                </div>

                <div class="detail-row">
                    <div class="detail-label">
                        <i class="bi bi-geo-alt me-2"></i>
                        <span id="booking-location-label">
                            ตำแหน่งโต๊ะ
                        </span>
                    </div>
                    <div class="detail-value">{{bookingLocation}}</div>
                </div>

                <div class="detail-row">
                    <div class="detail-label">
                        <i class="bi bi-person me-2"></i>
                        <span id="booking-name-label">
                            ชื่อผู้จอง'
                        </span>
                    </div>
                    <div class="detail-value">{{customerName}}</div>
                </div>

                <div class="detail-row">
                    <div class="detail-label">
                        <i class="bi bi-telephone me-2"></i>
                        <span id="booking-phone-label">
                            เบอร์โทรศัพท์
                        </span>
                    </div>
                    <div class="detail-value">{{customerPhone}}</div>
                </div>

                <div class="detail-row">
                    <div class="detail-label">
                        <i class="bi bi-envelope me-2"></i>
                        <span id="booking-email-label">
                            อีเมล
                        </span>
                    </div>
                    <div class="detail-value">{{customerEmail}}</div>
                </div>
            </div>

            <div class="text-center mt-4">
                <button type="button" class="btn btn-primary btn-lg" id="new-booking-btn">
                    <i class="bi bi-plus-circle me-2"></i>
                    <span id="new-booking-btn-text">
                        จองโต๊ะเพิ่ม
                    </span>
                </button>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.30.1/moment.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/moment@2.30.1/locale/th.js"></script>
    <script src="https://unpkg.com/nprogress@0.2.0/nprogress.js"></script>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Fallback data structure for AVAILABLE_DATES if not provided by Google Apps Script
        const AVAILABLE_DATES = <?!= availableDates ?>;
    </script>
    <script>
        // Initialize AOS animation library
        AOS.init();

        // DOM ready and window load event handlers
        document.addEventListener("DOMContentLoaded", function () {
            NProgress.start();
            NProgress.inc();
            initializeApp();

        });

        window.addEventListener("load", function () {
            NProgress.done();
        });
        // Global variables
        let currentDate = new Date();
        let selectedDate = null;
        let selectedTime = null;
        let selectedGuests = null;
        let selectedLocation = null;

        // Sample restaurant data (in real app, this would come from Google Apps Script)
        const restaurantData = {
            // Sample closed days (0 = Sunday, 1 = Monday, etc.)
            closedDays: [1], // Monday closed

            // Sample full days (format: YYYY-MM-DD)
            fullDays: [],

            // Sample available locations
            availableLocations: {
                upstairs: { name: 'ชั้นบน', available: true },
                downstairs: { name: 'ชั้นล่าง', available: true }
            }
        };

        function initializeApp() {
            // generateCalendar();
            setupEventListeners();
        }

        function setupEventListeners() {
            // Welcome page - Start booking button
            $('#start-booking').click(function () {
                $('#welcome-page').fadeOut(500, function () {
                    $('#booking-steps').fadeIn(500);
                    generateCalendar();
                    // Scroll to calendar section
                    setTimeout(() => {
                        $('#time-slot-section').fadeIn(500);
                        $('#guest-count-section').fadeIn(500);
                        $('#table-location-buttons').fadeIn(500);
                    }, 100);
                });
            });

            $('#english-version-btn').click(function () {
                window.appLanguage = 'en';
                convertToEnglish();
                $('#start-booking').click();
            });
            // Show calendar button
            $('#show-calendar-btn').click(function () {
                $(this).parent().fadeOut(300, function () {
                    $('#calendar-section').fadeIn(500, function () {
                        // Generate calendar when shown

                    });
                    // Show other sections

                });
            });

            // Calendar navigation
            $('#prev-month').click(() => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                generateCalendar();
            });

            $('#next-month').click(() => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                generateCalendar();
            });

            // Step navigation
            $('#next-to-step2').click(() => goToStep(2));
            $('#back-to-step1').click(() => goToStep(1));
            $('#back-to-welcome').click(() => goToWelcome());

            // Guest count button selection
            $(document).on('click', '.btn-guest-count:not(.unavailable)', function () {
                $('.btn-guest-count').removeClass('selected');
                $(this).addClass('selected');
                selectedGuests = $(this).data('guests');
                let location = $(this).data('location').split(',')

                // After selecting guest count, check location availability
                checkLocationAvailability(selectedDate, selectedGuests, location);

                // Scroll to table location section
                setTimeout(() => {
                    document.getElementById('table-location-buttons').scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }, 300);
            });

            // Time slot button selection
            $(document).on('click', '.btn-time-slot:not(.unavailable)', function () {
                $('.btn-time-slot').removeClass('selected');
                $(this).addClass('selected');
                selectedTime = $(this).data('time');

                // After selecting time, check available table types
                checkAvailableTableTypes(selectedDate, selectedTime);

                // Scroll to guest count section
                setTimeout(() => {
                    document.getElementById('guest-count-section').scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }, 300);
            });

            // Location button selection
            $(document).on('click', '.btn-location:not(.unavailable)', function () {
                $('.btn-location').removeClass('selected');
                $(this).addClass('selected');
                selectedLocation = $(this).data('location');
                updateNextButtonState();

                // Scroll to next button section
                setTimeout(() => {
                    document.getElementById('next-to-step2').scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }, 300);
            });

            // Form submission
            $('#booking-form').submit(function (e) {
                e.preventDefault();
                submitBooking();
            });
        }

        $('#customer-title').on('change', function () {
            const selectedValue = $(this).val();
            if (selectedValue === 'อื่นๆ') {
                $('#custom-title-input').show();
                $('#customer-title-custom').prop('required', true);
            } else {
                $('#custom-title-input').hide();
                $('#customer-title-custom').prop('required', false);
            }
        });



        function generateCalendar() {
            console.log(AVAILABLE_DATES);
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();

            const monthNames = window.appLanguage === 'en' ? [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ] : [
                'มกราคม', 'กุมภาพันธ์', 'มีนาคม', 'เมษายน', 'พฤษภาคม', 'มิถุนายน',
                'กรกฎาคม', 'สิงหาคม', 'กันยายน', 'ตุลาคม', 'พฤศจิกายน', 'ธันวาคม'
            ];;
            $('#current-month').text(`${monthNames[month]} ${year + 543}`);

            // Clear calendar
            $('#calendar').empty();

            // Add day headers
            const dayHeaders = window.appLanguage === 'en' ?
                ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'] :
                ['อา.', 'จ.', 'อ.', 'พ.', 'พฤ.', 'ศ.', 'ส.'];
            dayHeaders.forEach(day => {
                $('#calendar').append(`<div class="calendar-header">${day}</div>`);
            });

            // Get first day of month and number of days
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            const today = new Date();

            // Add empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                $('#calendar').append('<div class="calendar-day"></div>');
            }

            // Add days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const cellDate = new Date(year, month, day);
                const dateString = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;

                let status = 'available';
                let clickable = true;

                // Check if date is in the past
                if (cellDate < new Date(today.getFullYear(), today.getMonth(), today.getDate(), 0, 0, 0)) {
                    status = 'closed';
                    clickable = false;
                } else if (cellDate.toDateString() === today.toDateString() && today.getHours() >= 19) {
                    status = 'closed';
                    clickable = false;
                    AVAILABLE_DATES.available = AVAILABLE_DATES.available.filter(d => d.date !== dateString);
                }
                else if (AVAILABLE_DATES.available.findIndex(d => d.date === dateString) > -1) {
                    status = 'available';
                    clickable = true;
                }
                else if (AVAILABLE_DATES.closedDays.findIndex(d => d.date === dateString) > -1) {
                    status = 'closed';
                    clickable = false;
                }
                // Check if day is fully booked
                else if (AVAILABLE_DATES.fullDays.findIndex(d => d.date === dateString) > -1) {
                    status = 'full';
                    clickable = false;
                }

                const dayElement = $(`
            <div class="calendar-day ${status}" data-date="${dateString}" ${clickable ? 'style="cursor: pointer;"' : ''}>
                ${day}
            </div>
        `);

                if (clickable) {
                    dayElement.click(function () {
                        $('.calendar-day').removeClass('selected');
                        $(this).addClass('selected');
                        selectedDate = $(this).data('date');

                        // Reset selections
                        selectedTime = null;
                        selectedGuests = null;
                        selectedLocation = null;

                        // Enable time slot selection and reset guest/location sections
                        $('.btn-time-slot').removeClass('selected').addClass('unavailable').prop('disabled', true);
                        $('.btn-time-slot .availability-text').text(window.appLanguage === 'en' ? 'Closed' : 'ปิด');

                        // Reset guest count buttons to disabled state
                        $('.btn-guest-count').removeClass('selected').addClass('unavailable').prop('disabled', true);

                        // Reset location buttons to disabled state
                        $('.btn-location').removeClass('selected').addClass('unavailable').prop('disabled', true);
                        $('.btn-location .availability-text').text(window.appLanguage === 'en' ? 'Select guests first' : 'เลือกจำนวนที่นั่งก่อน');

                        // Check available time slots for selected date
                        let selectDateObj = new Date(selectedDate);
                        AVAILABLE_DATES.available.filter(t => t.date === selectedDate).forEach(slot => {
                            if (slot.round === '13:00' && selectDateObj.getHours() >= 13) {
                                return;
                            } else if (slot.round === '17:00' && selectDateObj.getHours() >= 17) {
                                return;
                            } else if (slot.round === '19:30' && selectDateObj.getHours() >= 19 && selectDateObj.getMinutes() >= 30) {
                                return;
                            }
                            const timeSlotBtn = $(`.btn-time-slot[data-time="${slot.round}"]`);
                            timeSlotBtn.removeClass('unavailable').prop('disabled', false);
                            timeSlotBtn.find('.availability-text').text(window.appLanguage === 'en' ? 'Available' : 'ว่าง');
                        });

                        // Check full time slots for selected date
                        if (AVAILABLE_DATES.fullDays) {
                            AVAILABLE_DATES.fullDays.filter(t => t.date === selectedDate).forEach(slot => {
                                const timeSlotBtn = $(`.btn-time-slot[data-time="${slot.round}"]`);
                                timeSlotBtn.addClass('unavailable').prop('disabled', true);
                                timeSlotBtn.find('.availability-text').text(window.appLanguage === 'en' ? 'Fully booked' : 'เต็ม');
                            });
                        }

                        updateNextButtonState();

                        // Scroll to time slot section
                        setTimeout(() => {
                            document.getElementById('time-slot-section').scrollIntoView({
                                top: 100,
                                behavior: 'smooth',
                            });
                        }, 300);
                    });
                }

                $('#calendar').append(dayElement);
            }

            // Add status legend at the bottom of the calendar
            $('#calendar').append(`
                <div class="status-legend" style="grid-column: 1 / -1; margin: 20px 0 0 0;">
                    <div class="legend-item">
                        <div class="legend-color"></div>
                        <span>${window.appLanguage === 'en' ? 'Available' : 'ว่าง'}</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color"></div>
                        <span>${window.appLanguage === 'en' ? 'Fully booked' : 'เต็ม'}</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color"></div>
                        <span>${window.appLanguage === 'en' ? 'Closed' : 'ปิด'}</span>
                    </div>
                </div>
            `);
        }

        function goToStep(step) {
            // Update step indicators
            $('.step').removeClass('active completed');
            $('.step-content').removeClass('active');

            for (let i = 1; i < step; i++) {
                $(`#step-${i}`).addClass('completed');
            }
            $(`#step-${step}`).addClass('active');
            $(`#content-${step}`).addClass('active');

            // Reset calendar visibility when going back to step 1
            if (step === 1) {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }

            // Update summary if going to step 2
            if (step === 2) {
                updateBookingSummary();
                // Scroll to top when step 2 is shown
                setTimeout(() => {
                    window.scrollTo({
                        top: 150,
                        behavior: 'smooth'
                    });
                }, 300);
            }
        }

        function goToWelcome() {
            // Reset all selections
            selectedDate = null;
            selectedTime = null;
            selectedGuests = null;
            selectedLocation = null;

            // Hide booking steps and show welcome page
            $('#booking-steps').fadeOut(500, function () {
                $('#welcome-page').fadeIn(500);
            });

            // Reset all form inputs
            $('#booking-form')[0].reset();

            // Reset calendar visibility
            $('#time-slot-section').hide();
            $('#guest-count-section').hide();
            $('#table-location-buttons').hide();

            // Reset all button states
            $('.calendar-day').removeClass('selected');
            $('.btn-time-slot').removeClass('selected').addClass('unavailable').prop('disabled', true);
            $('.btn-guest-count').removeClass('selected').addClass('unavailable').prop('disabled', true);
            $('.btn-location').removeClass('selected').addClass('unavailable').prop('disabled', true);
            $('#next-to-step2').prop('disabled', true);

            // Scroll to top
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        function updateNextButtonState() {
            // Enable next button only if date, time, guests, and location are all selected
            const canProceed = selectedDate && selectedTime && selectedGuests && selectedLocation;
            $('#next-to-step2').prop('disabled', !canProceed);
        }

        let avilableTableTypes = [];
        function checkAvailableTableTypes(date, time) {
            $('.btn-guest-count').addClass('unavailable').prop('disabled', true);
            $('.btn-guest-count span').text(window.appLanguage === 'en' ? 'Checking...' : 'กำลังตรวจสอบ...');
            $('.btn-guest-count .availability-text').show().text(window.appLanguage === 'en' ? 'Checking...' : 'กำลังตรวจสอบ...');

            // Reset location buttons to disabled state
            $('.btn-location').removeClass('selected').addClass('unavailable').prop('disabled', true);
            $('.btn-location .availability-text').text(window.appLanguage === 'en' ? 'Select guests first' : 'เลือกจำนวนที่นั่งก่อน');

            selectedGuests = null;
            selectedLocation = null;
            updateNextButtonState();

            google.script.run
                .withSuccessHandler(function (response) {
                    response = JSON.parse(response);
                    avilableTableTypes = response.map(t => t.guests)
                    console.log('Available table types:', response);
                    // Reset guest count buttons
                    $('.btn-guest-count').removeClass('unavailable selected').prop('disabled', false);

                    // Update each guest count button based on availability
                    $('.btn-guest-count').each(function () {
                        const guestCount = $(this).data('guests');
                        if (response.some(t => t.guests === guestCount)) {
                            $(this).find('span').text(`${guestCount} ${window.appLanguage === 'en' ? 'Persons' : 'ที่นั่ง'}`);
                            $(this).data('location', response.filter(t => t.guests === guestCount).map(t => t.location).join(','))
                            $(this).find('.availability-text').hide(); // Hide availability text when available
                        } else {
                            $(this).addClass('unavailable').prop('disabled', true);
                            $(this).find('span').text(`${guestCount} ${window.appLanguage === 'en' ? 'Persons Full' : 'ที่นั่ง เต็ม'}`);
                            $(this).data('location', '');
                            $(this).find('.availability-text').hide(); // Hide availability text when full
                        }
                    });
                })
                .withFailureHandler(function (error) {
                    console.error('Server error:', error);
                    // Reset to default state and show error
                    $('.btn-guest-count').removeClass('unavailable selected').prop('disabled', false);
                    $('.btn-guest-count').each(function () {
                        const guestCount = $(this).data('guests');
                        $(this).find('span').text(`${guestCount} ${window.appLanguage === 'en' ? 'Guests' : 'ที่นั่ง'}`);
                        $(this).find('.availability-text').hide(); // Hide availability text on error
                    });

                    // Show error message (optional)
                    alert('เกิดข้อผิดพลาดในการตรวจสอบโต๊ะว่าง กรุณาลองใหม่อีกครั้ง');
                })
                .checkAvailableTableTypes(date, time);
        }
        function checkLocationAvailability(date, guestCount, location) {
            console.log("🚀 ~ checkLocationAvailability ~ location:", location)
            location = [...new Set(location)]; // Ensure unique locations
            // location [บน, ล่าง]
            $('.btn-location').removeClass('unavailable selected');
            let availableLocations = [];
            if (!location || location.length === 0) {
                // No locations available, disable all buttons
                $('.btn-location').addClass('unavailable').prop('disabled', true);
                $('.btn-location .availability-text').text(window.appLanguage === 'en' ? 'Select guests first' : 'เลือกจำนวนที่นั่งก่อน');
                return;
            }
            if (guestCount === 10 && avilableTableTypes.includes(4) && avilableTableTypes.includes(6)) {
                // If 10 guests, both locations are available
                location.push('ล่าง')
            }

            // Update upstairs button
            const upstairsBtn = $('.btn-location[data-location="upstairs"]');
            if (location.includes('บน')) {
                upstairsBtn.removeClass('unavailable');
                upstairsBtn.find('.availability-text').text(window.appLanguage === 'en' ? 'Available' : 'ว่าง');
                availableLocations.push('upstairs');
            } else {
                upstairsBtn.addClass('unavailable');
                upstairsBtn.find('.availability-text').text(window.appLanguage === 'en' ? 'Fully booked' : 'เต็มแล้ว');
            }

            // Update downstairs button
            const downstairsBtn = $('.btn-location[data-location="downstairs"]');
            if (location.includes('ล่าง')) {
                downstairsBtn.removeClass('unavailable');
                downstairsBtn.find('.availability-text').text(window.appLanguage === 'en' ? 'Available' : 'ว่าง');
                availableLocations.push('downstairs');
            } else {
                downstairsBtn.addClass('unavailable');
                downstairsBtn.find('.availability-text').text(window.appLanguage === 'en' ? 'Fully booked' : 'เต็มแล้ว');
            }

            // If only one location is available, auto-select it
            if (availableLocations.length === 1) {
                selectedLocation = availableLocations[0];
                $(`.btn-location[data-location="${selectedLocation}"]`).addClass('selected');
                updateNextButtonState();
            } else {
                // Reset location selection
                selectedLocation = null;
                $('.btn-location').removeClass('selected').attr('disabled', false);
                updateNextButtonState();
            }
        }

        function updateBookingSummary() {
            const date = new Date(selectedDate);
            let options = window.appLanguage == 'en' ? {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
            } : {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
            }
            let locale = window.appLanguage === 'en' ? 'en-GB' : 'th-TH';
            $('#summary-date').text(date.toLocaleDateString(locale, options) + (window.appLanguage === 'en' ? ' at ' : ' เวลา ') + selectedTime);
            $('#summary-guests').text(selectedGuests + (window.appLanguage === 'en' ? ' Persons' : ' ที่นั่ง'));
            $('#summary-location').text(selectedLocation === 'upstairs' ? (window.appLanguage === 'en' ? 'Upstairs' : 'ชั้นบน') : (window.appLanguage === 'en' ? 'Downstairs' : 'ชั้นล่าง'));
        }

        function submitBooking() {

            const bookingData = {
                date: selectedDate,
                time: selectedTime,
                guests: selectedGuests,
                location: selectedLocation,
                title: $('#customer-title').val() == 'อื่นๆ' ? $('#customer-title-custom').val() : $('#customer-title').val(),
                fname: $('#customer-firstname').val(),
                lname: $('#customer-lastname').val(),
                phone: $('#customer-phone').val(),
                email: $('#customer-email').val(),
                menuImage: $('img[alt="Menu of the Month"]').attr('src')
            };

            // Show loading popup
            window.appLanguage == 'en' ? showCustomAlert('loading', 'Processing...', 'Sending booking data, please wait') : showCustomAlert('loading', 'กำลังประมวลผล...', 'กำลังส่งข้อมูลการจอง กรุณารอสักครู่');
            sendToGoogleSheets(bookingData);
        }

        // Custom alert function that matches page theme
        function showCustomAlert(type, title, message, callback = null) {
            // Remove any existing alert
            $('.custom-alert-overlay').remove();

            let iconHtml = '';
            let buttonColor = '#997e45';

            switch (type) {
                case 'loading':
                    iconHtml = '<div class="loading-spinner"></div>';
                    break;
                case 'success':
                    iconHtml = '<i class="bi bi-check-circle-fill" style="font-size: 4rem; color: #997e45;"></i>';
                    buttonColor = '#997e45';
                    break;
                case 'error':
                    iconHtml = '<i class="bi bi-x-circle-fill" style="font-size: 4rem; color: #dc3545;"></i>';
                    buttonColor = '#997e45';
                    break;
            }

            const alertHtml = `
                <div class="custom-alert-overlay">
                    <div class="custom-alert-container">
                        <div class="custom-alert-icon">
                            ${iconHtml}
                        </div>
                        <h3 class="custom-alert-title">${title}</h3>
                        <p class="custom-alert-message">${message}</p>
                        ${type !== 'loading' ? `<button class="custom-alert-button">ตกลง</button>` : ''}
                    </div>
                </div>
            `;

            // Add styles
            const alertStyles = `
                <style>
                .custom-alert-overlay {
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0, 0, 0, 0.7);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 10000;
                    animation: fadeIn 0.3s ease-out;
                }
                
                .custom-alert-container {
                    background: white;
                    border-radius: 20px;
                    padding: 40px;
                    text-align: center;
                    max-width: 400px;
                    width: 90%;
                    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                    animation: slideIn 0.3s ease-out;
                    font-family: 'Noto Sans Thai', sans-serif;
                }
                
                .custom-alert-icon {
                    margin-bottom: 20px;
                }
                
                .custom-alert-title {
                    color: #333333;
                    font-size: 1.8rem;
                    font-weight: 700;
                    margin-bottom: 15px;
                    font-family: 'Noto Sans Thai', sans-serif;
                }
                
                .custom-alert-message {
                    color: #333333;
                    font-size: 1.1rem;
                    margin-bottom: 25px;
                    line-height: 1.5;
                }
                
                .custom-alert-button {
                    background: #997e45;
                    border: none;
                    color: white;
                    padding: 10px 30px;
                    border-radius: 10px;
                    font-size: 1rem;
                    font-weight: 600;
                    cursor: pointer;
                    transition: all 0.3s ease;
                    font-family: 'Noto Sans Thai', sans-serif;
                    box-shadow: 0 4px 15px rgba(153, 126, 69, 0.3);
                }
                
                .custom-alert-button:hover {
                    transform: translateY(-2px);
                    box-shadow: 0 8px 25px rgba(153, 126, 69, 0.3);
                    background: #7a6336;
                }
                
                .loading-spinner {
                    width: 60px;
                    height: 60px;
                    border: 4px solid #f3f3f3;
                    border-top: 4px solid #997e45;
                    border-radius: 50%;
                    animation: spin 1s linear infinite;
                    margin: 0 auto;
                }
                
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                
                @keyframes slideIn {
                    from { 
                        opacity: 0;
                        transform: translateY(-30px) scale(0.9);
                    }
                    to { 
                        opacity: 1;
                        transform: translateY(0) scale(1);
                    }
                }
                
                @keyframes spin {
                    0% { transform: rotate(0deg); }
                    100% { transform: rotate(360deg); }
                }
                </style>
            `;

            // Add styles to head if not already added
            if (!$('#custom-alert-styles').length) {
                $('head').append(`<style id="custom-alert-styles">${alertStyles.replace(/<\/?style[^>]*>/g, '')}</style>`);
            }

            // Add alert to body
            $('body').append(alertHtml);

            // Add click handler for button
            $('.custom-alert-button').click(function () {
                $('.custom-alert-overlay').fadeOut(300, function () {
                    $(this).remove();
                    if (callback) callback();
                });
            });

            // Auto-close loading alerts are handled by the calling function
        }

        // Function to show booking success summary page
        function showBookingSummaryPage(bookingData) {
            // Hide booking steps
            $('#booking-steps').fadeOut(500, function () {
                // Create summary page HTML
                const summaryPage = $('#bookingSuccessPageTemplate').clone(true);
                summaryPage.removeAttr('id').attr('id', 'booking-success-page-content')
                const summaryPageHtml = summaryPage.html()
                    .replace(/{{bookingId}}/g, bookingData.bookingId)
                    .replace(/{{bookingDate}}/g, formatBookingDate(bookingData.date) + (window.appLanguage === 'en' ? ' at ' : ' เวลา ') + bookingData.time)
                    .replace(/{{bookingGuests}}/g, bookingData.guests)
                    .replace(/{{bookingLocation}}/g, bookingData.location)
                    .replace(/{{customerName}}/g, bookingData.title + ' ' + bookingData.fname + ' ' + bookingData.lname)
                    .replace(/{{customerPhone}}/g, bookingData.phone)
                    .replace(/{{customerEmail}}/g, bookingData.email)

                // Insert summary page
                $('.booking-card').append(summaryPageHtml);

                // Fade in summary page
                $('#booking-success-page').hide().fadeIn(500);

                // Scroll to top
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });

                // Add event listener for new booking button
                $('#new-booking-btn').click(function () {
                    window.open("<?!= scriptUrl ?>", '_top');
                });

                $('#copy-booking-id-btn').click(function () {
                    const bookingId = $('#booking-id-value').text().trim();
                    if (navigator.clipboard) {
                        navigator.clipboard.writeText(bookingId).then(function () {
                            $('#copy-booking-id-btn').tooltip('show');
                            setTimeout(() => {
                                $('#copy-booking-id-btn').tooltip('hide');
                            }, 1200);
                        });
                    } else {
                        // fallback for old browsers
                        const tempInput = $('<input>');
                        $('body').append(tempInput);
                        tempInput.val(bookingId).select();
                        document.execCommand('copy');
                        tempInput.remove();
                    }
                })
            });
        }

        // Helper function to format booking date
        function formatBookingDate(dateString) {
            const date = new Date(dateString);
            let options = window.appLanguage == 'en' ? {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
            } : {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
            };
            let locale = window.appLanguage == 'en' ? 'en-GB' : 'th-TH';
            return date.toLocaleDateString(locale, options);
        }

        function sendToGoogleSheets(data) {
            console.log("🚀 ~ sendToGoogleSheets ~ data:", data);
            // Call Google Apps Script function to handle booking
            google.script.run
                .withSuccessHandler(function (response) {
                    response = JSON.parse(response);
                    if (!response.success) {
                        window.appLanguage == 'en' ? showCustomAlert('error', 'Booking Failed!', response.message, function () {
                        }) :
                            showCustomAlert('error', 'จองไม่สำเร็จ!', window.appLanguage == 'en' ? response.messageEn : response.message, function () {
                            });
                        return;
                    }
                    google.script.run.withFailureHandler(e => console.log(e)).withSuccessHandler(e => console.log(e)).sendTelegramToAdmin(response.data);
                    google.script.run.withFailureHandler(e => console.log(e)).withSuccessHandler(e => console.log(e)).sendEmailToCustomer(response.data, window.appLanguage);
                    // Remove loading alert
                    $('.custom-alert-overlay').fadeOut(300, function () {
                        $(this).remove();
                    });
                    // Show booking summary page with form data
                    showBookingSummaryPage(response.data);
                })
                .withFailureHandler(function (error) {
                    console.error('Error sending booking:', error);
                    window.appLanguage == 'en' ? showCustomAlert('error', 'Error Occurred!', 'Unable to send booking data, please try again') :
                        showCustomAlert('error', 'เกิดข้อผิดพลาด!', 'ไม่สามารถส่งข้อมูลการจองได้ กรุณาลองใหม่อีกครั้ง');
                })
                .submitBooking(data);
        }

    </script>
    <script>
        function convertToEnglish() {
            $('.logo-container h2').text('Table Booking');
            $('#step-1 .step-text').text('Select Date');
            $('#step-2 .step-text').text('Select Time');
            $('#step-1-title').text('Select Date & Guests');
            $('#show-calendar-btn').html('<i class="bi bi-calendar-plus me-2"></i> Select Date');
            $('#time-slot-title').html('<i class="bi bi-clock-fill me-2"></i> Select Time');
            $('.time-slot-buttons').find('.availability-text').text('Please select a date first');
            $('#guest-count-title').html('<i class="bi bi-people-fill me-2"></i> Number of Guests');
            $('.guest-count-buttons').find('.availability-text').text('Please select a time first');
            $('.btn-guest-count').each(function () {
                const guests = $(this).data('guests');
                $(this).find('span').text(`${guests} Guests`);
            });
            $('#location-title').html('<i class="bi bi-geo-alt-fill me-2"></i> Table Location');
            $('.location-buttons').find('.availability-text').text('Please select the number of guests first');
            $('.btn-location').each(function () {
                const location = $(this).data('location');
                $(this).find('span').text(location === 'upstairs' ? 'Upstairs' : 'Downstairs');
            });
            $('#next-to-step2').html('<i class="bi bi-arrow-right-circle me-2"></i> Next');
            $('#back-to-welcome').html('<i class="bi bi-arrow-left-circle me-2"></i> Back');

            $('#step-2-title').text('Booking Information');
            
            $('label[for="customer-title"]').text('Title');
            $('label[for="customer-firstname"]').text('First Name');
            $('label[for="customer-lastname"]').text('Last Name');
            $('label[for="customer-phone"]').text('Phone Number');
            $('label[for="customer-email"]').text('Email Address');

            $('#summary-title').text('Booking Summary');
            $('#summary-date').parent().find('strong').text('Date and Time:');
            $('#summary-guests').parent().find('strong').text('Number of Guests:');
            $('#summary-location').parent().find('strong').text('Table Location:');
            $('#back-to-step1').html('<i class="bi bi-arrow-left-circle me-2"></i> Back');
            $('#confirm-booking').html('<i class="bi bi-check-circle me-2"></i> Confirm Booking');
            $('#menu-of-month-title').html('<i class="bi bi-list-ul me-2"></i> Menu of the Month');
            $('#menu-of-month-note').text('Please note that the menu may change monthly depending on ingredients and season.');
            $('.success-title').text('Booking Successful!');
            $('.success-subtitle').html('Thank you for your booking! Our staff will contact you to confirm your reservation.<br>Please check your email for the booking summary.');
            $('#booking-confirmation-title').text('Please Confirm Your Booking');
            $('#booking-confirmation-message').html('To complete your reservation, you <b>MUST</b> click the link below and send your booking ID to our staff via LINE chat.');
            $('#booking-confirmation-link').text('Click to confirm booking via LINE');
            $('#booking-confirmation-note').text('Your booking will be confirmed only after you contact our staff via Line Official Account.');
            $('#booking-details-title').text('Booking Details');
            $('#booking-id-label').text('Booking ID:');
            $('#booking-date-label').text('Booking Date Time:');
            $('#booking-guests-label').text('Number of Guests:');
            $('#booking-location-label').text('Table Location:');
            $('#booking-name-label').text('Name:');
            $('#booking-phone-label').text('Phone Number:');
            $('#booking-email-label').text('Email:');
            $('#new-booking-btn-text').text('New Booking');

            $('#customer-title').html('<option value="Mr.">Mr.</option><option value="Mrs.">Mrs.</option><option value="Ms.">Ms.</option><option value="อื่นๆ">Other</option>');
            $('#customer-title-custom').attr('placeholder', 'Please specify your title');
        }
    </script>
</body>

</html>