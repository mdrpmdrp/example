<!DOCTYPE html>
<html lang="en">

<head>
  <!-- no cache -->
  <base target="_top">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <!-- no cache -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ëšï½¡â‹†à­¨à­§Ëšğ€ğ‘ğˆğ¦ğ¢ğ§ğ¢ğ¬ğ¡ğ¨ğ©Ëšà­¨à­§â‹†ï½¡Ëš -
    <?!= username ?>
  </title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"
    integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Mitr:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
  <link
    href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@100..900&family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&family=Sacramento&display=swap"
    rel="stylesheet">
  <link
    href="https://cdn.datatables.net/v/bs5/moment-2.29.4/dt-2.2.2/b-3.2.2/date-1.5.5/fh-4.0.1/r-3.0.4/datatables.min.css"
    rel="stylesheet" integrity="sha384-ueQzCxxeOXanZJ+8+z1YzfYFOoMV/bBtRfT/6P/k/nyqSkqrjGZSWoeBZuRaenSv"
    crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css"
    integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" />
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/select2-bootstrap-5-theme@1.3.0/dist/select2-bootstrap-5-theme.min.css" />
  <style>
    * {
      font-family: 'Noto Sans Thai', sans-serif !important;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(to bottom, #ffe7f9, #fff);
      background-repeat: no-repeat;
      color: '#FBA1B7';
    }

    header .h1,
    span,
    div {
      color: #FBA1B7;
    }

    .text-pink {
      color: #f6a4c9 !important
    }

    .text-lavender {
      color: #f997f2;
    }

    .bg-lavender {
      background-color: #f997f2;
    }

    .bg-pink {
      background-color: #ece4e6;
    }

    .border-pink {
      border-color: #FBA1B7 rgba(0, 0, 0, 0) #FBA1B7 rgba(0, 0, 0, 0) !important;
    }

    .bg-pink-2 {
      background-color: #FBA1B7 !important;
      color: #fff !important;
    }

    .btn {
      color: #FFFFFF;
      background-color: #FBA1B7;
      border-color: #FBA1B7;
    }

    .btn:hover {
      color: #FFFFFF;
      background-color: #FFCCCC;
      border-color: #FFCCCC;
    }

    .dt-buttons {
      color: #fff !important;

      .form-select::placeholder {
        color: #fff
      }
    }

    .form-control::placeholder {
      color: #FFCCCC;
    }

    .status-icon {
      min-width: 30px;
      min-height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      font-size: 16px;
      font-weight: bold;
    }

    table.dataTable {
      border-collapse: separate;

      th,
      td {
        border: #f6a4c9 1px solid;
      }

      thead {
        tr:first-child {
          th:first-child {
            border-top-left-radius: 15px;
          }

          th:last-child {
            border-top-right-radius: 15px;
          }

          th {

            span,
            div {
              color: #af7785 !important;
              font-family: 'Pixelify Sans', sans-serif !important;
              font-size: 1.2rem;
              font-weight: 500;
            }

            background-color: #f8cee0;
          }
        }
      }

      tbody {
        tr:last-child {
          td:first-child {
            border-bottom-left-radius: 10px;
          }

          td:last-child {
            border-bottom-right-radius: 10px;
          }
        }
      }
    }

    .dt-paging-button .page-link {
      color: #FBA1B7;
    }

    .official {
      background-color: #ff5757;
      color: #000;
    }

    .lock-info {
      background-color: #68db21;
      color: #fdfefc;
    }

    .waiting-2nd-payment {
      background-color: #004aad;
      color: #fdfefc;
    }

    .problem-detected {
      background-color: #595959;
      color: #ff5757;
    }

    .no-payment {
      background-color: #ff3131;
      color: #fffbfb;
    }

    .importing {
      background-color: #ff914d;
      color: #000
    }

    .checking {
      background-color: #ffcb39;
      color: #000;
    }

    .ready {
      background-color: #7ed957;
      color: #fff;
    }

    .success {
      background-color: #6a976c;
      color: #fff;
    }

    .dt-body-middle {
      vertical-align: middle;
    }

    .dt-head-middle {
      vertical-align: middle;
    }

    .fs-small {
      font-size: 0.8rem;
    }

    .fs-smaller {
      font-size: 0.7rem;
    }

    .img-fluid {
      cursor: pointer;
    }

    /* Copy status animation */
    #copy-status {
      transition: all 0.3s ease;
      opacity: 0;
      transform: scale(0.8);
    }

    #copy-status.show {
      opacity: 1;
      transform: scale(1);
    }

    #copy-status.animate {
      animation: copyPulse 0.6s ease-in-out;
    }

    @keyframes copyPulse {
      0% {
        transform: scale(0.8);
        opacity: 0;
      }

      50% {
        transform: scale(1.1);
        opacity: 1;
      }

      100% {
        transform: scale(1);
        opacity: 1;
      }
    }

    @media (min-width: 320px) and (max-width: 480px) {
      header img[alt="logo"] {
        width: 200px;
        height: 200px;
      }
    }

    @media (min-width: 481px) and (max-width: 576px) {
      header img[alt="logo"] {
        width: 300px;
        height: 300px;
      }
    }

    @media (min-width: 577px) and (max-width: 768px) {
      header img[alt="logo"] {
        width: 400px;
        height: 400px;
      }
    }

    @media (min-width: 769px) and (max-width: 992px) {
      header img[alt="logo"] {
        width: 500px;
        height: 500px;
      }
    }

    @media (min-width: 993px) {
      header img[alt="logo"] {
        width: 600px;
        height: 600px;
      }
    }

    .bg-swal-info {
      background-color: #f2f2f2 !important;
      border: #ece3e5 solid 2px;
    }

    .font-noto-sans-thai {
      font-family: "Noto Sans Thai", sans-serif !important;
    }

    .select2-container--bootstrap-5 .select2-dropdown .select2-results__options .select2-results__option.select2-results__option--highlighted {
      color: #fff;
      background-color: #767676;
    }
  </style>
</head>

<body>
  <nav class="navbar bg-pink">
    <div class="container-fluid">
      <div class="w-100 navbar-brand  text-pink d-flex  gap-2 align-items-center m-0 p-0" onclick="window.open('<?!= scriptURL ?>',
    '_top')">
        <div class="w-100 d-flex align-items-start gap-2">
          <img src="<?!= setting.LOGO_URL ?>" alt="Logo" height="45" class="d-inline-block align-text-top">
          <div class="w-100 d-flex flex-column mt-1" style="color: #77c4b4">
            ï½¡â‹†à­¨à­§Ëšğ€ğ‘ğˆğ¦ğ¢ğ§ğ¢ğ¬ğ¡ğ¨ğ©Ëšà­¨à­§â‹†ï½¡Ëš
            <div class="w-100 d-flex">
              <span style="font-family: Pixelify Sans;">
                <i class="bi bi-shop-window"></i>
                <?!= username ?>
              </span>
            </div>
          </div>
        </div>
      </div>

    </div>
  </nav>
  <main>
    <div class="container">
      <div class="row my-4">
        <div class="col-12 text-center">
          <img src="<?!= setting.Tracking_Banner ?>" alt="banner" class="img-fluid rounded-4 my-2">
        </div>
      </div>
      <div class="row mt-4 p-0 m-0 mb-5">
        <div class="table-responsive m-0 p-0">
          <table class="table table-hovee table-striped mb-3" id="mainTable" style="width: 100%"></table>
        </div>
      </div>
    </div>
  </main>


  <script>
    const scriptURL = '<?!= scriptURL ?>';
    $(document).ready(function () {
      renderTable();
    });

    function renderTable() {
      let mock_data = <?!= mock_data ?>;
      console.log("ğŸš€ ~ renderTable ~ mock_data:", mock_data);
      if(!mock_data || mock_data.length === 0) {
        Swal.fire({
          title: 'à¹„à¸¡à¹ˆà¸¡à¸µà¸‚à¹‰à¸­à¸¡à¸¹à¸¥',
          text: 'à¸¢à¸±à¸‡à¹„à¸¡à¹ˆà¸¡à¸µà¸«à¸¡à¸²à¸¢à¹€à¸¥à¸‚ Tracking Number',
          icon: 'info',
          confirmButtonText: 'à¸•à¸à¸¥à¸‡',
          customClass: {
            popup: 'bg-swal-info rounded-4',
            title: 'text-pink',
            confirmButton: 'btn bg-pink-2 text-white',
          }
        }).then((result) => {
          window.open(scriptURL, '_top');
        });
        return;
      }
      // console.log("ğŸš€ ~ renderTable ~ mock_data:", mock_data);
      let data_table = $('#mainTable').DataTable({
        data: mock_data,
        scrollX: true,
        pageing: false,
        columns: [
          {
            data: 'recipientName', title: 'Addressee'
          },
          {
            data: 'tracking_no', title: 'Tracking Number',
            render: function (data, type, row) {
              if (!data || data == '') return "-"
              return `<a href="${row.tracking_link}" target="_blank" class="text-pink">${data}</a>&nbsp;&nbsp;<i class="bi bi-clipboard-heart-fill text-dark" id="copyAccountBtn" data-account-no="${row.tracking_no}"
                        style="cursor: pointer;"></i><span id="copy-status" class="ms-2 text-success d-none"
                        style="font-size: 0.7rem">à¸„à¸±à¸”à¸¥à¸­à¸à¹à¸¥à¹‰à¸§!</span>`;
            }
          },
          { data: 'type', title: 'Type' },
          { data: 'date_time', title: 'Date' },
          { data: 'status', title: 'status', visible: false },
        ],
        columnDefs: [
          {
            targets: '_all',
            className: 'dt-head-center dt-head-middle dt-head-nowrap dt-body-center dt-body-middle text-pink text-nowrap'
          },
        ],
        language: {
          url: 'https://cdn.datatables.net/plug-ins/1.11.5/i18n/th.json'
        },
        dom: 't',
        initComplete: function () {
          $('#copyAccountBtn').click(function () {
            let text = $(this).data('account-no').toString().trim()
            navigator.clipboard.writeText(text);
            $(this).removeClass('bi-clipboard-heart-fill').addClass('bi-check-lg')
            $('#copy-status').removeClass('d-none').addClass('show animate').text('à¸„à¸±à¸”à¸¥à¸­à¸à¹à¸¥à¹‰à¸§!');
            setTimeout(() => {
              $(this).removeClass('bi-check-lg').addClass('bi-clipboard-heart-fill')
              $('#copy-status').removeClass('show animate').addClass('d-none').text('');
            }, 2000);
          });
        }
      })
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous">
    </script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script
    src="https://cdn.datatables.net/v/bs5/moment-2.29.4/dt-2.2.2/b-3.2.2/date-1.5.5/fh-4.0.1/r-3.0.4/datatables.min.js"
    integrity="sha384-XL3VuFAFXVanC5lK95FqZNW/Qg5rBre7IJ5WIrMYrkC5KdrmkoWC8RTV9Pn209RL" crossorigin="anonymous">
    </script>
  <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
  <!-- <script src="https://unpkg.com/vconsole@latest/dist/vconsole.min.js">
    </script>
    <script> // VConsole will be exported to `window.VConsole` by default.
        var vConsole = new window.VConsole();
    </script> -->
</body>

</html>